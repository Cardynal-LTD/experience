<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cardynal - Human + AI Customer Support</title>
  <meta name="description" content="Cardynal deploys intelligent AI agents on your behalf. We handle the tech — you get a complete support automation platform.">
  <meta name="author" content="Cardynal">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://cardynal.io/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Cardynal">
  <meta property="og:title" content="Cardynal - Human + AI Customer Support">
  <meta property="og:description" content="Fully managed AI support platform. No developers needed.">
  <meta property="og:url" content="https://cardynal.io/">
  <meta property="og:image" content="https://cardynal.io/og-image.jpg">

  <!-- Theme -->
  <meta name="theme-color" content="#020917">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anonymous+Pro:wght@400;700&family=Libre+Baskerville:wght@400;700&family=Open+Sans:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="./css/landing/index.css">
</head>
<body class="landing-page">
  <!-- Header -->
  <header class="landing-header">
    <div class="landing-header__content">
      <a href="/" class="landing-header__logo">
        <img src="/logo-cardynal.png" alt="Cardynal" class="landing-header__logo-img">
        <span>Cardynal</span>
      </a>
      <nav class="landing-header__nav" id="mainNav">
        <a href="/" data-i18n="nav.home">Home</a>
        <a href="#features" data-i18n="nav.features">Features</a>
        <a href="#pricing" data-i18n="nav.pricing">Pricing</a>
        <a href="#faq" data-i18n="nav.faq">FAQ</a>
      </nav>
      <div class="landing-header__actions">
        <select class="lang-select" id="langSelect" onchange="setLang(this.value)">
          <option value="en">EN</option>
          <option value="fr">FR</option>
          <option value="he">HE</option>
        </select>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
          <svg class="sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="https://cal.com/cardynal.io/30min" class="btn btn--primary" data-i18n="nav.contact">Contact Us</a>
      </div>
      <button class="landing-header__menu-btn" id="menuBtn" aria-label="Menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero-section" id="hero">
    <div class="hero-section__bg">
      <div class="hero-section__gradient"></div>
    </div>
    <div class="hero-section__content">
      <div class="hero-section__text">
        <h1 class="hero-section__title" data-i18n="hero.title">
          Human + AI Customer Support -<br>Fully managed,<br>from day one
        </h1>
        <p class="hero-section__description" data-i18n="hero.description">
          Cardynal deploys intelligent AI agents on your behalf. We handle the tech — you get a complete support automation platform with your own AI dashboard and help desk. No developers needed.
        </p>
        <div class="hero-section__cta">
          <a href="https://cal.com/cardynal.io/30min" class="btn btn--primary btn--lg" data-i18n="hero.cta">
            Book a call
          </a>
        </div>
        <div class="hero-section__features">
          <div class="hero-feature">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            <span data-i18n="hero.feature1">WhatsApp, Web chat, Social Media</span>
          </div>
          <div class="hero-feature">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            <span data-i18n="hero.feature2">Operational in days not months</span>
          </div>
          <div class="hero-feature">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            <span data-i18n="hero.feature3">Fully managed setup</span>
          </div>
        </div>
      </div>
      <div class="hero-section__visual">
        <!-- Chat Flow Demo Widget -->
        <div id="chat-flow-demo"></div>
      </div>
    </div>
  </section>

  <!-- Problem Section -->
  <section class="problem-section">
    <div class="problem-section__content">
      <h2 class="section-title" data-i18n="problem.title">You don't need another tool. You need support that works.</h2>
      <p class="section-subtitle" data-i18n="problem.description">
        You've seen the demos. AI chatbots that promise the world — then require months of integration, API approvals, and a dev team to maintain. Meanwhile, your support queue keeps growing. What if you could have enterprise-grade AI support without the enterprise complexity?
      </p>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="stats-section">
    <div class="stats-section__content">
      <div class="stat-card">
        <div class="stat-card__number">~70%</div>
        <div class="stat-card__label" data-i18n="stats.stat1">of requests handled autonomously with AI</div>
      </div>
      <div class="stat-card">
        <div class="stat-card__number">&lt;5s</div>
        <div class="stat-card__label" data-i18n="stats.stat2">average AI response time</div>
      </div>
      <div class="stat-card">
        <div class="stat-card__number">0</div>
        <div class="stat-card__label" data-i18n="stats.stat3">missed conversations across channels</div>
      </div>
      <div class="stat-card">
        <div class="stat-card__number">48h</div>
        <div class="stat-card__label" data-i18n="stats.stat4">from kickoff to live support</div>
      </div>
    </div>
  </section>

  <!-- Audience Section -->
  <section class="audience-section">
    <div class="audience-section__content">
      <h2 class="section-title" data-i18n="audience.title">For who?</h2>
      <div class="audience-grid">
        <div class="audience-card">
          <div class="audience-card__icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <h3 class="audience-card__title" data-i18n="audience.card1.title">Service Companies</h3>
          <p class="audience-card__description" data-i18n="audience.card1.desc">Never miss a lead. Never leave a question unanswered. Cardynal keeps your pipeline flowing 24/7.</p>
        </div>
        <div class="audience-card">
          <div class="audience-card__icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
            </svg>
          </div>
          <h3 class="audience-card__title" data-i18n="audience.card2.title">SaaS & IoT</h3>
          <p class="audience-card__description" data-i18n="audience.card2.desc">Deflect L1 tickets. Let your team focus on real engineering problems while AI handles the rest.</p>
        </div>
        <div class="audience-card">
          <div class="audience-card__icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/>
            </svg>
          </div>
          <h3 class="audience-card__title" data-i18n="audience.card3.title">Retail & E-commerce</h3>
          <p class="audience-card__description" data-i18n="audience.card3.desc">From order tracking to product questions, Cardynal handles it all — so your team can focus on growth.</p>
        </div>
        <div class="audience-card">
          <div class="audience-card__icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
          </div>
          <h3 class="audience-card__title" data-i18n="audience.card4.title">Consultants</h3>
          <p class="audience-card__description" data-i18n="audience.card4.desc">Scale your expertise. Let AI handle initial inquiries while you focus on high-value consultations.</p>
        </div>
      </div>
      <div class="audience-section__cta">
        <a href="https://cal.com/cardynal.io/30min" class="btn btn--primary btn--lg" data-i18n="audience.cta">Schedule a demo</a>
      </div>
    </div>
  </section>

  <!-- Laptop Section -->
  <section class="laptop-section">
    <div class="laptop-section__image">
      <img id="dashboard-preview" src="/dashboard-light-en.png" alt="Cardynal Dashboard" style="width: 100%; border-radius: 1rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
    </div>
    <h2 class="section-title" data-i18n="laptop.title">AI Agents That Think Before They Respond</h2>
    <p class="section-subtitle" data-i18n="laptop.description">
      By combining AI with human expertise, Cardynal streamlines workflows, automates repetitive tasks, and creates truly magical customer experiences.
    </p>
  </section>

  <!-- Features Section -->
  <section class="features-section" id="features">
    <!-- Feature 1: Playbooks - Light card -->
    <div class="feature-card feature-card--light">
      <div class="feature-card__content">
        <div class="feature-badge">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/>
          </svg>
          <span data-i18n="features.routing.badge">Playbooks</span>
        </div>
        <h3 class="feature-card__title" data-i18n="features.routing.title">Scenario-based intelligence</h3>
        <p class="feature-card__description" data-i18n="features.routing.description">
          Our AI doesn't just match keywords — it understands context. Each conversation triggers the right playbook, pulling from your knowledge base to deliver accurate, on-brand responses.
        </p>
        <ul class="feature-list">
          <li data-i18n="features.routing.list1">Intent-based triggers</li>
          <li data-i18n="features.routing.list2">Multi-step flows</li>
          <li data-i18n="features.routing.list3">External tool calls</li>
        </ul>
      </div>
      <div class="feature-card__visual feature-card__visual--playbook">
        <!-- Playbook Flow Widget -->
        <div id="playbook-widget">
          <div class="pbw-progress-container">
            <div class="pbw-progress-bar" id="pbw-progress"></div>
          </div>
          <div class="pbw-track-container">
            <div class="pbw-track" id="pbw-track"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Features 2 & 3: Two columns -->
    <div class="feature-grid-two">
      <div class="feature-card feature-card--dark">
        <div class="feature-badge">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/>
          </svg>
          <span data-i18n="features.escalation.badge">Smart Escalation</span>
        </div>
        <h3 class="feature-card__title" data-i18n="features.escalation.title">Humans when it matters</h3>
        <p class="feature-card__description" data-i18n="features.escalation.description">
          AI handles the routine. When things get complex, conversations seamlessly transfer to your team — with full context, so customers never repeat themselves.
        </p>
        <ul class="feature-list">
          <li data-i18n="features.escalation.list1">Configurable triggers</li>
          <li data-i18n="features.escalation.list2">Auto-generated notes</li>
          <li data-i18n="features.escalation.list3">Seamless transition</li>
        </ul>
        <div class="feature-card__visual feature-card__visual--tree">
          <!-- Escalation Tree Widget -->
          <div id="tree-widget">
            <div class="tw-node" id="tw-n1">
              <span class="tw-step">1</span>
              <div class="tw-icon" id="tw-i1"></div>
              <div class="tw-content">
                <h4 id="tw-t1"></h4>
                <p id="tw-d1"></p>
              </div>
              <div class="tw-status"></div>
            </div>
            <div class="tw-line" id="tw-l1"></div>
            <div class="tw-node" id="tw-n2">
              <span class="tw-step">2</span>
              <div class="tw-icon" id="tw-i2"></div>
              <div class="tw-content">
                <h4 id="tw-t2"></h4>
                <p id="tw-d2"></p>
              </div>
              <div class="tw-status"></div>
            </div>
            <div class="tw-line" id="tw-l2"></div>
            <div class="tw-branch-container">
              <div class="tw-branch-lines">
                <div class="tw-arm tw-arm-left" id="tw-arm-left"></div>
                <div class="tw-arm tw-arm-right" id="tw-arm-right"></div>
              </div>
              <div class="tw-node" id="tw-n3-left">
                <div class="tw-tag-blocked">BLOCKED</div>
                <div class="tw-icon" id="tw-i3l"></div>
                <div class="tw-content">
                  <h4 id="tw-t3l"></h4>
                  <p id="tw-d3l"></p>
                </div>
                <div class="tw-status"></div>
              </div>
              <div class="tw-node" id="tw-n3-right">
                <div class="tw-tag">PRIORITY</div>
                <div class="tw-icon" id="tw-i3r"></div>
                <div class="tw-content">
                  <h4 id="tw-t3r"></h4>
                  <p id="tw-d3r"></p>
                </div>
                <div class="tw-status"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="feature-card feature-card--dark">
        <div class="feature-badge">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <span data-i18n="features.knowledge.badge">Knowledge Base</span>
        </div>
        <h3 class="feature-card__title" data-i18n="features.knowledge.title">Your documentation, instantly searchable</h3>
        <p class="feature-card__description" data-i18n="features.knowledge.description">
          Upload your docs, FAQs, and policies. Cardynal indexes everything and retrieves the right answer in milliseconds — no training required.
        </p>
        <ul class="feature-list">
          <li data-i18n="features.knowledge.list1">PDF, Word, CSV, URL ingestion</li>
          <li data-i18n="features.knowledge.list2">RAG-powered retrieval</li>
          <li data-i18n="features.knowledge.list3">Source citations</li>
        </ul>
        <div class="feature-card__visual feature-card__visual--rag">
          <div id="rag-widget">
            <!-- Knowledge Base -->
            <div class="rag-kb-section">
              <div class="rag-kb-label">
                <span>Knowledge Base</span>
              </div>
              <div class="rag-docs">
                <div class="rag-doc" id="rag-doc-1" data-type="pdf">
                  <span class="rag-doc-type">PDF</span>
                  <div class="rag-doc-icon">
                    <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"/>
                    </svg>
                  </div>
                  <span class="rag-doc-name">Terms.pdf</span>
                </div>
                <div class="rag-doc" id="rag-doc-target" data-type="pdf">
                  <span class="rag-doc-type">PDF</span>
                  <div class="rag-doc-icon">
                    <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25Z"/>
                    </svg>
                  </div>
                  <span class="rag-doc-name">Policy.pdf</span>
                </div>
                <div class="rag-doc" id="rag-doc-3" data-type="csv">
                  <span class="rag-doc-type">CSV</span>
                  <div class="rag-doc-icon">
                    <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 15.75h7.5"/>
                    </svg>
                  </div>
                  <span class="rag-doc-name">Rates.csv</span>
                </div>
              </div>
            </div>
            <!-- Pipeline -->
            <div class="rag-pipeline">
              <div class="rag-pipeline-label left retrieval" id="rag-label-retrieval">Retrieval</div>
              <div class="rag-beam-track">
                <div class="rag-beam" id="rag-beam"></div>
              </div>
              <div class="rag-pipeline-label right generation" id="rag-label-generation">Generation</div>
            </div>
            <!-- Chat -->
            <div class="rag-chat" id="rag-chat">
              <div class="rag-msg user" id="rag-user-msg">What is the refund policy?</div>
              <div class="rag-msg ai" id="rag-ai-msg">
                <div class="rag-ai-content">
                  <div class="rag-thinking" id="rag-thinking">
                    <div class="rag-thinking-dot"></div>
                    <div class="rag-thinking-dot"></div>
                    <div class="rag-thinking-dot"></div>
                  </div>
                  <div class="rag-ai-text" id="rag-ai-text" style="display: none;">Scanning knowledge base...</div>
                  <div class="rag-source" id="rag-source">
                    <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"/>
                    </svg>
                    <span>Policy.pdf</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Feature 4: Omnichannel - Visual left, text right -->
    <div class="feature-card feature-card--dark feature-card--reverse">
      <div class="feature-card__visual feature-card__visual--omni">
        <div id="omni-widget">
          <div class="omni-hub">
            <div class="omni-orbit"></div>
            <svg class="omni-lines-svg" viewBox="0 0 320 320">
              <line class="omni-line" id="omni-line-0" x1="160" y1="72" x2="160" y2="128" style="--line-color: var(--c-whatsapp); --line-glow: rgba(37, 211, 102, 0.5)"/>
              <line class="omni-line" id="omni-line-1" x1="228" y1="108" x2="192" y2="138" style="--line-color: var(--c-instagram); --line-glow: rgba(228, 64, 95, 0.5)"/>
              <line class="omni-line" id="omni-line-2" x1="245" y1="180" x2="195" y2="172" style="--line-color: var(--c-messenger); --line-glow: rgba(0, 132, 255, 0.5)"/>
              <line class="omni-line" id="omni-line-3" x1="212" y1="230" x2="185" y2="195" style="--line-color: var(--c-telegram); --line-glow: rgba(0, 136, 204, 0.5)"/>
              <line class="omni-line" id="omni-line-4" x1="108" y1="230" x2="135" y2="195" style="--line-color: var(--c-gmail); --line-glow: rgba(234, 67, 53, 0.5)"/>
              <line class="omni-line" id="omni-line-5" x1="75" y1="180" x2="125" y2="172" style="--line-color: var(--c-web); --line-glow: rgba(59, 130, 246, 0.5)"/>
              <line class="omni-line" id="omni-line-6" x1="92" y1="108" x2="128" y2="138" style="--line-color: var(--c-api); --line-glow: rgba(139, 92, 246, 0.5)"/>
              <circle class="omni-packet" id="omni-packet-0" r="4" style="fill: var(--c-whatsapp)"/>
              <circle class="omni-packet" id="omni-packet-1" r="4" style="fill: var(--c-instagram)"/>
              <circle class="omni-packet" id="omni-packet-2" r="4" style="fill: var(--c-messenger)"/>
              <circle class="omni-packet" id="omni-packet-3" r="4" style="fill: var(--c-telegram)"/>
              <circle class="omni-packet" id="omni-packet-4" r="4" style="fill: var(--c-gmail)"/>
              <circle class="omni-packet" id="omni-packet-5" r="4" style="fill: var(--c-web)"/>
              <circle class="omni-packet" id="omni-packet-6" r="4" style="fill: var(--c-api)"/>
            </svg>
            <div class="omni-core">
              <div class="omni-logo" id="omni-logo">
                <div class="omni-pulse"></div>
                <div class="omni-pulse"></div>
                <div class="omni-pulse"></div>
                <img src="/logo-cardynal.png" alt="Cardynal" class="omni-logo-img">
              </div>
            </div>
            <div class="omni-channel" data-index="0" id="omni-ch-0" style="--channel-color: var(--c-whatsapp)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></div>
              <span class="omni-channel-label">WhatsApp</span>
            </div>
            <div class="omni-channel" data-index="1" id="omni-ch-1" style="--channel-color: var(--c-instagram)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.069 4.85c-.148 3.228-1.667 4.771-4.919 4.919-1.266.058-1.644.069-4.85.069s-3.584-.012-4.85-.069c-3.228-.148-4.771-1.667-4.919-4.919-.058-1.265-.069-1.644-.069-4.85s.012-3.584.069-4.85c.148-3.228 1.667-4.771 4.919-4.919 1.266-.058 1.645-.069 4.85-.069m0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.073-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></div>
              <span class="omni-channel-label">Instagram</span>
            </div>
            <div class="omni-channel" data-index="2" id="omni-ch-2" style="--channel-color: var(--c-messenger)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 4.974 0 11.111c0 3.497 1.744 6.616 4.469 8.658v4.231l4.261-2.342c1.067.295 2.189.454 3.345.454 6.627 0 12-4.975 12-11.111C24 4.974 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26 6.559-6.963 3.13 3.259 5.889-3.259-6.56 6.963z"/></svg></div>
              <span class="omni-channel-label">Messenger</span>
            </div>
            <div class="omni-channel" data-index="3" id="omni-ch-3" style="--channel-color: var(--c-telegram)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 11.944 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg></div>
              <span class="omni-channel-label">Telegram</span>
            </div>
            <div class="omni-channel" data-index="4" id="omni-ch-4" style="--channel-color: var(--c-gmail)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/></svg></div>
              <span class="omni-channel-label">Email</span>
            </div>
            <div class="omni-channel" data-index="5" id="omni-ch-5" style="--channel-color: var(--c-web)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></div>
              <span class="omni-channel-label">Web</span>
            </div>
            <div class="omni-channel" data-index="6" id="omni-ch-6" style="--channel-color: var(--c-api)">
              <div class="omni-channel-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></div>
              <span class="omni-channel-label">API</span>
            </div>
          </div>
          <div class="omni-output">
            <div class="omni-output-line" id="omni-output-line"></div>
            <div class="omni-inbox" id="omni-inbox">
              <div class="omni-inbox-badge" id="omni-inbox-badge">+1</div>
              <div class="omni-inbox-icon">
                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"/></svg>
              </div>
              <div class="omni-inbox-content">
                <h4>Unified Inbox</h4>
                <p>All conversations in one place</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="feature-card__content">
        <div class="feature-badge">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <span data-i18n="features.omni.badge">Multi-Channel Inbox</span>
        </div>
        <h3 class="feature-card__title" data-i18n="features.omni.title">One brain, every channel</h3>
        <p class="feature-card__description" data-i18n="features.omni.description">
          Bring every customer conversation into one collaborative inbox — no matter the channel. Your team can access, manage, and respond quickly.
        </p>
        <ul class="feature-list">
          <li data-i18n="features.omni.list1">Real-time sync</li>
          <li data-i18n="features.omni.list2">Team collaboration</li>
          <li data-i18n="features.omni.list3">Auto-assignment</li>
          <li data-i18n="features.omni.list4">Full conversation history</li>
        </ul>
      </div>
    </div>

    <!-- Feature 5: Integrations -->
    <div class="feature-card feature-card--dark">
      <div class="feature-card__content">
        <div class="feature-badge">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/>
          </svg>
          <span data-i18n="features.api.badge">Integrations</span>
        </div>
        <h3 class="feature-card__title" data-i18n="features.api.title">Cardynal.io agents learn your business. Just like real employees.</h3>
        <p class="feature-card__description" data-i18n="features.api.description">
          Let your AI pull live data from your CRM, ERP, or any REST API. Check order status, verify accounts, fetch inventory — without leaving the conversation.
        </p>
      </div>
      <div class="feature-card__visual">
        <div class="feature-visual-placeholder">API Integrations</div>
      </div>
    </div>
  </section>

  <!-- Pricing Section -->
  <section class="pricing-section" id="pricing">
    <div class="pricing-section__content">
      <div class="pricing-section__header">
        <div class="feature-badge">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
          <span data-i18n="pricing.badge">AI Pricing</span>
        </div>
        <h2 class="section-title" data-i18n="pricing.title">Simple Pricing. No Surprises.</h2>
        <p class="section-subtitle" data-i18n="pricing.subtitle">Pay for resolutions, not conversations. Escalations to humans are always free.</p>
      </div>

      <div class="pricing-card">
        <div class="pricing-card__left">
          <h3 class="pricing-card__title" data-i18n="pricing.plan">Starter</h3>
          <p class="pricing-card__description" data-i18n="pricing.description">For solopreneurs & early-stage companies who want to improve their customer service.</p>
          <div class="pricing-card__price">
            <span class="pricing-card__amount" data-i18n="pricing.amount">$99</span>
            <span class="pricing-card__period" data-i18n="pricing.period">/ month</span>
          </div>
          <div class="pricing-card__addons">
            <div class="pricing-addon">
              <span class="pricing-addon__price" data-i18n="pricing.seatPrice">+$25</span>
              <span class="pricing-addon__label" data-i18n="pricing.addon1">per seat/month</span>
            </div>
            <div class="pricing-addon">
              <span class="pricing-addon__price" data-i18n="pricing.resolutionPrice">+$0.90</span>
              <span class="pricing-addon__label" data-i18n="pricing.addon2">per resolution</span>
            </div>
          </div>
          <a href="https://cal.com/cardynal.io/30min" class="btn btn--primary btn--lg btn--full" data-i18n="pricing.cta">Get started</a>
          <button type="button" class="btn btn--secondary btn--lg btn--full pricing-roi-btn" id="openRoiCalculator" data-i18n="pricing.roiBtn">Calculate your ROI</button>
        </div>
        <div class="pricing-card__features">
          <h4 data-i18n="pricing.features">Key features included</h4>
          <ul>
            <li><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> <span data-i18n="pricing.f1">100 AI resolutions included</span></li>
            <li><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> <span data-i18n="pricing.f2">2 seats (1 admin + 1 agent)</span></li>
            <li><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> <span data-i18n="pricing.f3">Unlimited escalations</span></li>
            <li><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> <span data-i18n="pricing.f4">Unlimited AI conversations*</span></li>
            <li><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> <span data-i18n="pricing.f5">WhatsApp + Web chat</span></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section" id="faq">
    <div class="faq-section__content">
      <div class="faq-section__header">
        <h2 class="section-title" data-i18n="faq.title">Questions?<br>Let's clear things up.</h2>
        <p class="section-subtitle" data-i18n="faq.subtitle">
          AI-powered solutions, business automation tools... a lot of big words can get confusing. We're here to make it clear.
        </p>
      </div>

      <div class="faq-list">
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q1">What exactly is Cardynal?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a1">Cardynal is a fully managed AI support platform. We deploy intelligent AI agents that handle customer conversations across WhatsApp, web chat, and all your channels.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q2">How is Cardynal different from Intercom, Zendesk, and other solutions?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a2">Those are help desks with AI features bolted on. Cardynal is AI-first and fully managed — we deploy everything for you and optimize it continuously.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q3">How does the WhatsApp Integration work?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a3">Just like WhatsApp Web. You scan a QR code with your phone, and your WhatsApp is connected. No Meta Business API approval needed.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q4">Do I need technical skills?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a4">No. We handle all the technical work. You use the dashboard to monitor conversations, review analytics, and make business decisions.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q5">What channels do you support?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a5">WhatsApp, web chat widget, Instagram, Facebook, Telegram, Discord, and API for custom integrations. Email and SMS are coming soon.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q6">What if I'm not satisfied?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a6">We offer a proof-of-concept phase where you can test with real conversations before committing. No long-term contracts required.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q7">How long does setup take?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a7">48 hours from kickoff to live. Most of that is us building your playbooks and loading your knowledge base.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary class="faq-item__question" data-i18n="faq.q8">How do I add Cardynal to my wordpress website?</summary>
          <div class="faq-item__answer">
            <p data-i18n="faq.a8">We provide a WordPress plugin that installs in one click. Activate it, paste your key, and the chat widget appears instantly.</p>
          </div>
        </details>
      </div>
    </div>
  </section>

  <!-- Blog Section -->
  <section class="blog-section" id="blog">
    <div class="blog-section__content">
      <div class="blog-section__header">
        <h2 class="section-title" data-i18n="blog.title">Latest Articles</h2>
        <a href="/blog.html" class="btn btn--secondary" data-i18n="blog.viewAll">View all</a>
      </div>
      <div class="blog-grid" id="blogGrid">
        <!-- Blog cards will be loaded dynamically -->
        <div class="blog-card">
          <div class="blog-card__image"></div>
          <div class="blog-card__body">
            <h3 class="blog-card__title">Loading articles...</h3>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="landing-footer">
    <div class="landing-footer__content">
      <div class="landing-footer__brand">
        <a href="/" class="landing-footer__logo">
          <img src="/logo-cardynal.png" alt="Cardynal" class="landing-footer__logo-img">
          <span>Cardynal</span>
        </a>
        <p data-i18n="footer.tagline">Human + AI Customer Support<br>Fully managed, from day one.</p>
      </div>
      <div class="landing-footer__links">
        <div class="landing-footer__column">
          <h4 data-i18n="footer.product">Product</h4>
          <a href="#features" data-i18n="nav.features">Features</a>
          <a href="#pricing" data-i18n="nav.pricing">Pricing</a>
          <a href="#faq" data-i18n="nav.faq">FAQ</a>
        </div>
        <div class="landing-footer__column">
          <h4 data-i18n="footer.company">Company</h4>
          <a href="/blog.html" data-i18n="footer.blog">Blog</a>
          <a href="/about.html" data-i18n="footer.about">About</a>
          <a href="mailto:contact@cardynal.io" data-i18n="footer.contact">Contact</a>
        </div>
        <div class="landing-footer__column">
          <h4 data-i18n="footer.legal">Legal</h4>
          <a href="/privacy.html" data-i18n="footer.privacy">Privacy</a>
          <a href="/terms.html" data-i18n="footer.terms">Terms</a>
        </div>
      </div>
      <div class="landing-footer__contact">
        <h4 data-i18n="footer.getInTouch">Get In Touch</h4>
        <p>
          Email: contact@cardynal.io
        </p>
      </div>
    </div>
    <div class="landing-footer__bottom">
      <p>&copy; 2026 Cardynal. All rights reserved.</p>
    </div>
  </footer>

  <!-- ROI Calculator Modal -->
  <div class="roi-modal" id="roiModal">
    <div class="roi-modal__backdrop"></div>
    <div class="roi-modal__content">
      <button type="button" class="roi-modal__close" id="closeRoiModal">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
      <div class="roi-calculator">
        <div class="roi-calculator__header">
          <h2 data-i18n="roi.title">Calculate Your ROI</h2>
          <p data-i18n="roi.subtitle">See how much you can save with Cardynal AI support</p>
        </div>
        <div class="roi-calculator__body">
          <div class="roi-calculator__inputs">
            <div class="roi-input-group">
              <label data-i18n="roi.monthlyConversations">Monthly support conversations</label>
              <input type="number" id="roiConversations" value="1000" min="100" step="100">
            </div>
            <div class="roi-input-group">
              <label data-i18n="roi.avgHandleTime">Average handle time (minutes)</label>
              <input type="number" id="roiHandleTime" value="8" min="1" step="1">
            </div>
            <div class="roi-input-group">
              <label data-i18n="roi.agentHourlyCost">Agent hourly cost (<span class="roi-currency">$</span>)</label>
              <input type="number" id="roiAgentCost" value="25" min="10" step="5">
            </div>
            <div class="roi-input-group roi-input-group--slider">
              <div class="roi-slider-header">
                <label data-i18n="roi.aiResolutionRate">AI resolution rate</label>
                <span class="roi-slider-value" id="roiResolutionValue">70%</span>
              </div>
              <input type="range" id="roiResolutionRate" value="70" min="30" max="95" step="5" class="roi-slider">
            </div>
          </div>
          <div class="roi-calculator__results">
            <div class="roi-result-card roi-result-card--highlight">
              <span class="roi-result-card__label" data-i18n="roi.monthlySavings">Monthly Savings</span>
              <span class="roi-result-card__value" id="roiMonthlySavings">$0</span>
            </div>
            <div class="roi-result-card">
              <span class="roi-result-card__label" data-i18n="roi.currentCost">Current Monthly Cost</span>
              <span class="roi-result-card__value" id="roiCurrentCost">$0</span>
            </div>
            <div class="roi-result-card">
              <span class="roi-result-card__label" data-i18n="roi.withCardynal">With Cardynal</span>
              <span class="roi-result-card__value" id="roiWithCardynal">$0</span>
            </div>
            <div class="roi-result-card">
              <span class="roi-result-card__label" data-i18n="roi.hoursRecovered">Hours Recovered/Month</span>
              <span class="roi-result-card__value" id="roiHoursRecovered">0h</span>
            </div>
          </div>
        </div>
        <div class="roi-calculator__footer">
          <p data-i18n="roi.disclaimer">*Based on $99/mo base + $0.90 per resolution. Actual results may vary.</p>
          <a href="https://cal.com/cardynal.io/30min" class="btn btn--primary btn--lg" data-i18n="roi.cta">Get Started Now</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Global function for language switching with URL change
    function setLang(lang) {
      localStorage.setItem('cardynal_lang', lang);
      // Redirect to language-specific URL
      var path = window.location.pathname;
      // Remove existing lang prefix
      path = path.replace(/^\/(en|fr|he)(\/|$)/, '/');
      // Add new lang prefix (except for English which is default)
      if (lang === 'en') {
        window.location.href = path || '/';
      } else {
        window.location.href = '/' + lang + (path === '/' ? '' : path);
      }
    }
    // Detect language from URL and set on page load
    document.addEventListener('DOMContentLoaded', function() {
      var path = window.location.pathname;
      var urlLang = null;
      if (path.startsWith('/fr')) urlLang = 'fr';
      else if (path.startsWith('/he')) urlLang = 'he';

      var storedLang = localStorage.getItem('cardynal_lang');
      var lang = urlLang || storedLang || 'en';

      if (urlLang && urlLang !== storedLang) {
        localStorage.setItem('cardynal_lang', urlLang);
      }

      var select = document.getElementById('langSelect');
      if (select) select.value = lang;
    });
  </script>

  <script type="module">
    // Import translations from external modules
    import { TRANSLATIONS, WIDGET_TRANSLATIONS } from '/js/i18n/index.js';

    // Note: TRANSLATIONS and WIDGET_TRANSLATIONS are now imported from:
    // - src/js/i18n/en.js, fr.js, he.js
    // - src/js/i18n/widgets/en.js, fr.js, he.js

    // Legacy inline translations removed - using imports above
    const _UNUSED_TRANSLATIONS = {
      en: {
        'nav.home': 'Home',
        'nav.features': 'Product',
        'nav.pricing': 'Pricing',
        'nav.faq': 'FAQ',
        'nav.contact': 'Contact us',
        'hero.title': 'Human + AI Customer Support - Fully managed, from day one',
        'hero.description': 'Cardynal deploys intelligent AI agents on your behalf. We handle the tech — you get a complete support automation platform with your own AI dashboard and help desk. No developers needed.',
        'hero.cta': 'Book a demo',
        'hero.feature1': 'WhatsApp · Web chat · Social inbox',
        'hero.feature2': 'Operational in days not months',
        'hero.feature3': 'Fully managed setup',
        'problem.title': "You don't need another tool. You need support that works.",
        'problem.description': "You've seen the demos. AI chatbots that promise the world — then require months of integration, API approvals, and a dev team to maintain. Meanwhile, your support queue keeps growing. What if you could have enterprise-grade AI support without the enterprise complexity?",
        'stats.stat1': 'of requests handled autonomously with AI',
        'stats.stat2': 'average AI response time',
        'stats.stat3': 'missed conversations across channels',
        'stats.stat4': 'Days, not weeks, from kickoff to live support',
        'audience.title': 'For who?',
        'audience.card1.title': 'Service Companies',
        'audience.card1.desc': 'Never miss a lead. Never leave a question unanswered. Whether it\'s plumbing, real estate, or consulting — Cardynal responds to every inquiry 24/7, qualifies prospects, and routes hot leads to your team.',
        'audience.card2.title': 'SaaS & IoT',
        'audience.card2.desc': 'Deflect L1 tickets. Let your team focus on real problems. Cardynal answers how-to questions, guides users through troubleshooting, and searches your docs instantly.',
        'audience.card3.title': 'Retail & E-commerce',
        'audience.card3.desc': 'From order tracking to product questions, Cardynal resolves issues instantly. Your AI handles "where\'s my order?", return requests, and product inquiries — with live data from your store.',
        'audience.card4.title': 'Consultants',
        'audience.card4.desc': 'Scale your expertise. Let AI handle initial inquiries while you focus on high-value consultations.',
        'audience.cta': 'Schedule a demo',
        'laptop.title': 'AI Agents That Think Before They Respond',
        'laptop.description': 'By combining AI with human expertise, Cardynal streamlines workflows, automates repetitive tasks, and creates truly magical customer experiences.',
        'features.routing.badge': 'Playbooks',
        'features.routing.title': 'Scenario-Based Intelligence',
        'features.routing.description': 'Define exactly how your AI handles each type of request. Product questions, refund policies, technical troubleshooting — each gets its own rulebook.',
        'features.routing.list1': 'Intent-based triggers',
        'features.routing.list2': 'Multi-step flows',
        'features.routing.list3': 'External tool calls',
        'features.escalation.badge': 'Smart Escalation',
        'features.escalation.title': 'Humans When It Matters',
        'features.escalation.description': 'Not everything should be automated. Cardynal detects frustration, complexity, and explicit requests — and routes to your team with a full context summary.',
        'features.escalation.list1': 'Configurable triggers',
        'features.escalation.list2': 'Auto-generated notes',
        'features.escalation.list3': 'Seamless transition',
        'features.knowledge.badge': 'Knowledge Base',
        'features.knowledge.title': 'Your Documentation, Instantly Searchable',
        'features.knowledge.description': 'Upload your docs, FAQs, and policies. Cardynal converts them into a vector-powered knowledge base your AI actually uses.',
        'features.knowledge.list1': 'PDF, Word, CSV, URL ingestion',
        'features.knowledge.list2': 'RAG-powered retrieval',
        'features.knowledge.list3': 'Source citations',
        'features.omni.badge': 'Multi-Channel Inbox',
        'features.omni.title': 'One Brain, Every Channel',
        'features.omni.description': 'Bring every customer conversation into one collaborative inbox — no matter the channel. Your team can access, manage, and respond quickly, ensuring nothing slips through the cracks.',
        'features.omni.list1': 'Real-time sync',
        'features.omni.list2': 'Team collaboration',
        'features.omni.list3': 'Auto-assignment',
        'features.omni.list4': 'Full conversation history',
        'features.api.badge': 'Integrations',
        'features.api.title': 'Cardynal.io agents learn your business. Just like real employees.',
        'features.api.description': 'Let your AI pull live data from your CRM, ERP, or any REST API. Check order status, verify accounts, fetch inventory — without leaving the conversation.',
        'pricing.badge': 'Pricing',
        'pricing.title': 'Simple Pricing. No Surprises.',
        'pricing.subtitle': 'Pay for resolutions, not conversations. Escalations to humans are always free.',
        'pricing.plan': 'Base',
        'pricing.description': 'For solopreneurs & early-stage companies who want to improve their customer service.',
        'pricing.amount': '$99',
        'pricing.period': 'Per month',
        'pricing.seatPrice': '+$25',
        'pricing.addon1': 'per seat/month',
        'pricing.resolutionPrice': '+$0.90',
        'pricing.addon2': 'per resolution',
        'pricing.cta': 'Get started',
        'pricing.features': 'Key features included',
        'pricing.f1': '100 AI resolutions included',
        'pricing.f2': '2 seats (1 admin + 1 agent)',
        'pricing.f3': 'Unlimited escalations',
        'pricing.f4': 'Unlimited AI conversations*',
        'pricing.f5': 'WhatsApp + Web chat',
        'faq.title': 'Questions?<br>Let\'s clear things up.',
        'faq.subtitle': 'Yes, we understand—AI-powered solutions, business automation tools, AI for marketing, AI for customer support… a lot of big words can get confusing. We\'re here to make it clear.',
        'faq.q1': 'What exactly is Cardynal?',
        'faq.a1': 'Cardynal is a fully managed AI support platform. We deploy intelligent AI agents that handle customer conversations across WhatsApp, web chat, and all your channels.',
        'faq.q2': 'How is Cardynal different from Intercom, Zendesk, and other solutions?',
        'faq.a2': 'Those are help desks with AI features bolted on. Cardynal is AI-first and fully managed — we deploy everything for you and optimize it continuously.',
        'faq.q3': 'How does the WhatsApp integration work?',
        'faq.a3': 'Just like WhatsApp Web. You scan a QR code with your phone, and your WhatsApp is connected. No Meta Business API approval needed.',
        'faq.q4': 'Do I need technical skills?',
        'faq.a4': 'No. We handle all the technical work. You use the dashboard to monitor conversations, review analytics, and make business decisions.',
        'faq.q5': 'What channels do you support?',
        'faq.a5': 'WhatsApp, web chat widget, Instagram, Facebook, Telegram, Discord, and API for custom integrations. Email and SMS are coming soon.',
        'faq.q6': 'What if I\'m not satisfied?',
        'faq.a6': 'We offer a proof-of-concept phase where you can test with real conversations before committing. No long-term contracts required.',
        'faq.q7': 'How long does setup take?',
        'faq.a7': '48 hours from kickoff to live. Most of that is us building your playbooks and loading your knowledge base.',
        'faq.q8': 'How do I add Cardynal to my WordPress website?',
        'faq.a8': 'We provide a WordPress plugin that installs in one click. Activate it, paste your key, and the chat widget appears instantly.',
        'blog.title': 'Latest articles',
        'blog.viewAll': 'View all',
        'footer.tagline': 'Cardynal is an AI agency that helps companies integrate AI into their daily operations, combining human expertise with powerful AI technology.',
        'footer.product': 'Product',
        'footer.company': 'Company',
        'footer.legal': 'Legal',
        'footer.blog': 'Blog',
        'footer.about': 'About',
        'footer.contact': 'Contact',
        'footer.privacy': 'Privacy',
        'footer.terms': 'Terms',
        'footer.getInTouch': 'Get In Touch',
        'pricing.roiBtn': 'Calculate your ROI',
        'pricing.resolution': 'What\'s a resolution?',
        'pricing.resolutionDesc': 'When your AI successfully handles a customer request — answers a question, solves a problem, provides information. Escalated conversations and test messages don\'t count. You only pay when the AI delivers value.',
        'roi.title': 'Calculate Your ROI',
        'roi.subtitle': 'See how much you can save with Cardynal AI support',
        'roi.monthlyConversations': 'Monthly support conversations',
        'roi.avgHandleTime': 'Average handle time (minutes)',
        'roi.agentHourlyCost': 'Agent hourly cost',
        'roi.aiResolutionRate': 'AI resolution rate (%)',
        'roi.monthlySavings': 'Monthly Savings',
        'roi.currentCost': 'Current Monthly Cost',
        'roi.withCardynal': 'With Cardynal',
        'roi.hoursRecovered': 'Hours Recovered/Month',
        'roi.disclaimer': '*Based on $99/mo base + $0.90 per resolution. Actual results may vary.',
        'roi.cta': 'Get Started Now'
      },
      fr: {
        'nav.home': 'Accueil',
        'nav.features': 'Fonctionnalites',
        'nav.pricing': 'Tarifs',
        'nav.faq': 'FAQ',
        'nav.contact': 'Discutons-en',
        'hero.title': 'Le support client qui bosse pendant que vous dormez',
        'hero.description': "Un agent IA qui repond sur WhatsApp, traite 70% des demandes en autonomie, et vous laisse vous concentrer sur ce qui compte. On s'occupe de tout — vous recoltez les fruits.",
        'hero.cta': 'Discutons-en',
        'hero.feature1': 'WhatsApp, chat web, reseaux sociaux',
        'hero.feature2': 'Operationnel en 48h',
        'hero.feature3': 'Installation 100% geree par nos soins',
        'problem.title': "Vous n'avez pas besoin d'un enieme outil. Vous avez besoin d'un support qui fonctionne.",
        'problem.description': "Vous avez vu les demos. Les chatbots qui promettent monts et merveilles. Et ensuite ? Des mois d'integration. Des validations API. Une equipe tech a mobiliser. Pendant ce temps, vos clients attendent. Et si on faisait autrement ? Un support IA de niveau enterprise — sans la complexite enterprise.",
        'stats.stat1': 'des demandes traitees automatiquement',
        'stats.stat2': 'temps de reponse moyen',
        'stats.stat3': 'conversation qui passe entre les mailles',
        'stats.stat4': 'du feu vert au go live',
        'audience.title': 'Pour qui ?',
        'audience.card1.title': 'Entreprises de services',
        'audience.card1.desc': 'Un prospect qui ecrit a 23h ? On repond. Une question le dimanche ? Couverte. Cardynal garde votre pipeline actif — 24/7.',
        'audience.card2.title': 'SaaS & Tech',
        'audience.card2.desc': 'Laissez l\'IA absorber les tickets niveau 1. Votre equipe se concentre sur les vrais problemes techniques.',
        'audience.card3.title': 'E-commerce & Retail',
        'audience.card3.desc': '"Ou est ma commande ?" "C\'est disponible ?" "Quelle est votre politique de retour ?" L\'IA repond. Vous vendez.',
        'audience.card4.title': 'Consultants & Independants',
        'audience.card4.desc': 'Scalez sans recruter. L\'IA gere les premieres prises de contact, vous vous concentrez sur les clients qui paient.',
        'audience.cta': 'Reserver une demo',
        'laptop.title': 'Des agents IA qui reflechissent avant de repondre',
        'laptop.description': 'L\'alliance de l\'IA et de l\'expertise humaine. Automatisation intelligente, experience client exceptionnelle.',
        'features.routing.badge': 'Playbooks',
        'features.routing.title': 'Une intelligence contextuelle, pas des mots-cles',
        'features.routing.description': 'Notre IA ne cherche pas des mots — elle comprend l\'intention. Chaque conversation declenche le bon scenario, avec la bonne info, sur le bon ton.',
        'features.routing.list1': 'Detection d\'intention automatique',
        'features.routing.list2': 'Flux multi-etapes',
        'features.routing.list3': 'Connexion a vos outils externes',
        'features.escalation.badge': 'Escalade Intelligente',
        'features.escalation.title': 'L\'humain quand ca compte vraiment',
        'features.escalation.description': 'L\'IA gere la routine. Quand ca se complique ? La conversation passe a votre equipe — avec tout le contexte. Le client ne se repete jamais.',
        'features.escalation.list1': 'Transfert fluide vers un agent',
        'features.escalation.list2': 'Resume automatique de l\'echange',
        'features.escalation.list3': 'Priorisation intelligente',
        'features.knowledge.badge': 'Base de Connaissances',
        'features.knowledge.title': 'Toute votre documentation — en une seconde',
        'features.knowledge.description': 'Uploadez vos docs, FAQ, politiques. Cardynal indexe tout et ressort la bonne reponse en millisecondes.',
        'features.knowledge.list1': 'PDF, Word, Excel, URLs',
        'features.knowledge.list2': 'Recherche intelligente RAG',
        'features.knowledge.list3': 'Citation des sources',
        'features.omni.badge': 'Inbox Multi-Canal',
        'features.omni.title': 'Un cerveau, tous les canaux',
        'features.omni.description': 'WhatsApp, Instagram, Facebook, Telegram, chat web — tout arrive dans une seule boite. Votre equipe voit, repond et gere depuis un seul endroit.',
        'features.omni.list1': 'Synchro temps reel',
        'features.omni.list2': 'Collaboration d\'equipe',
        'features.omni.list3': 'Attribution automatique',
        'features.omni.list4': 'Historique complet des conversations',
        'features.api.badge': 'Integrations',
        'features.api.title': 'Des agents IA qui connaissent votre business',
        'features.api.description': 'L\'IA recupere des donnees en temps reel depuis votre CRM, ERP, ou n\'importe quelle API. Statut de commande ? Details du compte ? Stock ? Tout ca sans quitter la conversation.',
        'pricing.badge': 'Tarification',
        'pricing.title': 'Tarification simple. Zero surprise.',
        'pricing.subtitle': 'Vous payez les resolutions, pas les conversations. Les transferts vers un humain ? Toujours gratuits.',
        'pricing.plan': 'Starter',
        'pricing.description': 'Pour les independants et petites entreprises qui veulent professionnaliser leur support client.',
        'pricing.amount': '99\u20AC',
        'pricing.period': '/ mois',
        'pricing.seatPrice': '+25\u20AC',
        'pricing.addon1': 'par utilisateur',
        'pricing.resolutionPrice': '+0.90\u20AC',
        'pricing.addon2': 'par resolution IA',
        'pricing.cta': 'C\'est parti',
        'pricing.features': 'Ce qui est inclus :',
        'pricing.f1': '100 resolutions IA incluses',
        'pricing.f2': '2 utilisateurs (1 admin + 1 agent)',
        'pricing.f3': 'Transferts illimites',
        'pricing.f4': 'Conversations IA illimitees*',
        'pricing.f5': 'WhatsApp + Chat web',
        'faq.title': 'Des questions ?<br>On clarifie.',
        'faq.subtitle': 'IA, automatisation, agents intelligents... beaucoup de jargon. On simplifie.',
        'faq.q1': 'C\'est quoi exactement Cardynal ?',
        'faq.a1': 'Une plateforme de support client 100% geree. On deploie des agents IA qui gerent vos conversations clients sur WhatsApp, sur votre site, et sur tous vos canaux.',
        'faq.q2': 'Quelle difference avec Intercom ou Zendesk ?',
        'faq.a2': 'Ce sont des help desks avec de l\'IA greffee dessus. Chez nous, l\'IA est au coeur — et on gere tout pour vous.',
        'faq.q3': 'Comment fonctionne l\'integration WhatsApp ?',
        'faq.a3': 'Exactement comme WhatsApp Web. Vous scannez un QR code avec votre telephone — et c\'est connecte. Pas besoin d\'approbation Meta, pas d\'API complexe.',
        'faq.q4': 'J\'ai besoin de competences techniques ?',
        'faq.a4': 'Absolument pas. On gere toute la technique. Vous utilisez le dashboard pour suivre les conversations, voir les stats, et prendre des decisions business.',
        'faq.q5': 'Quels canaux sont supportes ?',
        'faq.a5': 'WhatsApp, chat web, Instagram, Facebook, Telegram, Discord, et API pour les integrations custom. Email et SMS arrivent bientot.',
        'faq.q6': 'Et si je ne suis pas satisfait ?',
        'faq.a6': 'On propose une phase de POC — vous testez avec de vraies conversations avant de vous engager. Pas de contrat long terme.',
        'faq.q7': 'Combien de temps pour la mise en place ?',
        'faq.a7': '48 heures a partir du demarrage. L\'essentiel du temps, c\'est nous qui travaillons — on construit vos scenarios et on charge votre base de connaissances.',
        'faq.q8': 'Comment ajouter le chat a mon site WordPress ?',
        'faq.a8': 'Un plugin WordPress qui s\'installe en un clic. Vous l\'activez, vous collez votre cle — et le widget apparait.',
        'blog.title': 'Derniers articles',
        'blog.viewAll': 'Voir tout',
        'footer.tagline': 'Support client Human + IA. Entierement gere, des le premier jour.',
        'footer.product': 'Produit',
        'footer.company': 'Entreprise',
        'footer.legal': 'Legal',
        'footer.blog': 'Blog',
        'footer.about': 'A propos',
        'footer.contact': 'Contact',
        'footer.privacy': 'Confidentialite',
        'footer.terms': 'Conditions',
        'footer.getInTouch': 'Discutons-en',
        'pricing.roiBtn': 'Calculez votre ROI',
        'roi.title': 'Calculez Votre ROI',
        'roi.subtitle': 'Decouvrez combien vous pouvez economiser avec Cardynal',
        'roi.monthlyConversations': 'Conversations mensuelles',
        'roi.avgHandleTime': 'Temps moyen de traitement (min)',
        'roi.agentHourlyCost': 'Cout horaire agent',
        'roi.aiResolutionRate': 'Taux de resolution IA (%)',
        'roi.monthlySavings': 'Economies Mensuelles',
        'roi.currentCost': 'Cout Mensuel Actuel',
        'roi.withCardynal': 'Avec Cardynal',
        'roi.hoursRecovered': 'Heures Recuperees/Mois',
        'roi.disclaimer': '*Base sur 99\u20AC/mois + 0,90\u20AC par resolution. Les resultats peuvent varier.',
        'roi.cta': 'C\'est parti'
      },
      he: {
        'nav.home': 'דף הבית',
        'nav.features': 'תכונות',
        'nav.pricing': 'מחירים',
        'nav.faq': 'שאלות נפוצות',
        'nav.contact': 'בוא נדבר',
        'hero.title': 'שירות לקוחות שעובד בשבילך — לא במקומך',
        'hero.description': 'סוכן AI שמבין עברית, עונה בוואטסאפ, ומטפל ב-70% מהפניות בלי שתרים אצבע. אנחנו מקימים, אתה נהנה.',
        'hero.cta': 'בוא נדבר',
        'hero.feature1': 'וואטסאפ, צ\'אט באתר, רשתות חברתיות',
        'hero.feature2': 'עובד תוך 48 שעות',
        'hero.feature3': 'אנחנו מטפלים בכל הטכנולוגיה',
        'problem.title': 'נמאס לך מצ\'אטבוטים מטומטמים?',
        'problem.description': 'ראית את הדמואים. שמעת את ההבטחות. "AI שישנה לך את העסק!" ואז מה קורה? חודשים של אינטגרציה. מתכנתים. אישורים מפייסבוק. ובינתיים — הלקוחות שלך מחכים בתור. מה אם יש דרך אחרת? שירות AI ברמה של חברות הייטק — בלי הסיבוכים של חברת הייטק.',
        'stats.stat1': 'מהפניות נסגרות אוטומטית',
        'stats.stat2': 'זמן תגובה ממוצע',
        'stats.stat3': 'הודעות שנופלות בין הכיסאות',
        'stats.stat4': 'מהרגע שאמרת "יאללה" — אתה באוויר',
        'audience.title': 'למי זה מתאים?',
        'audience.card1.title': 'חברות שירות',
        'audience.card1.desc': 'לקוח שואל בלילה? לא מפספסים. פנייה נופלת? לא אצלנו. Cardynal שומר על הצינור שלך מלא — 24/7.',
        'audience.card2.title': 'SaaS וטכנולוגיה',
        'audience.card2.desc': 'תנו ל-AI לספוג את השאלות החוזרות. הצוות שלכם יתעסק במה שהוא באמת טוב בו.',
        'audience.card3.title': 'קמעונאות ואיקומרס',
        'audience.card3.desc': '"איפה ההזמנה שלי?" "יש לכם במלאי?" "מה מדיניות ההחזרות?" AI עונה. אתה מוכר.',
        'audience.card4.title': 'יועצים ופרילנסרים',
        'audience.card4.desc': 'תגדיל את עצמך בלי להעסיק. AI מטפל בפניות ראשוניות, אתה מתמקד בלקוחות שמשלמים.',
        'audience.cta': 'קבע הדגמה',
        'laptop.title': 'סוכני AI שחושבים לפני שהם עונים',
        'laptop.description': 'שילוב של AI עם מומחיות אנושית. אוטומציה חכמה, חווית לקוח יוצאת דופן.',
        'features.routing.badge': 'Playbooks',
        'features.routing.title': 'תרחישים, לא מילות מפתח',
        'features.routing.description': 'ה-AI שלנו לא מחפש מילים — הוא מבין מה הלקוח רוצה. כל שיחה מפעילה את התסריט הנכון, עם המידע הנכון, בטון הנכון.',
        'features.routing.list1': 'זיהוי כוונה אוטומטי',
        'features.routing.list2': 'תהליכים מרובי שלבים',
        'features.routing.list3': 'חיבור לכלים חיצוניים',
        'features.escalation.badge': 'אסקלציה חכמה',
        'features.escalation.title': 'אנשים — כשצריך אנשים',
        'features.escalation.description': 'AI מטפל ברוטינה. כשזה מסתבך? השיחה עוברת לצוות שלך — עם כל ההקשר, בלי שהלקוח חוזר על עצמו.',
        'features.escalation.list1': 'העברה חלקה לנציג',
        'features.escalation.list2': 'סיכום אוטומטי של השיחה',
        'features.escalation.list3': 'תעדוף חכם',
        'features.knowledge.badge': 'בסיס ידע',
        'features.knowledge.title': 'כל המידע שלך — בשנייה',
        'features.knowledge.description': 'העלה מסמכים, FAQ, מדיניות. Cardynal מאנדקס הכל ומוציא את התשובה הנכונה תוך מילישניות.',
        'features.knowledge.list1': 'PDF, Word, Excel, קישורים',
        'features.knowledge.list2': 'אחזור חכם מבוסס RAG',
        'features.knowledge.list3': 'ציטוט מקורות',
        'features.omni.badge': 'תיבת דואר רב-ערוצית',
        'features.omni.title': 'מוח אחד, כל הערוצים',
        'features.omni.description': 'וואטסאפ, אינסטגרם, פייסבוק, טלגרם, צ\'אט באתר — הכל נכנס לתיבה אחת. הצוות שלך רואה, מגיב, ומנהל ממקום אחד.',
        'features.omni.list1': 'סנכרון בזמן אמת',
        'features.omni.list2': 'שיתוף פעולה בצוות',
        'features.omni.list3': 'הקצאה אוטומטית',
        'features.omni.list4': 'היסטוריית שיחות מלאה',
        'features.api.badge': 'אינטגרציות',
        'features.api.title': 'סוכני AI שמכירים את העסק שלך',
        'features.api.description': 'ה-AI שולף נתונים חיים מה-CRM, מהמערכת הפיננסית, מכל API. סטטוס הזמנה? פרטי חשבון? מלאי? הכל בלי לצאת מהשיחה.',
        'pricing.badge': 'תמחור',
        'pricing.title': 'תמחור פשוט. בלי הפתעות.',
        'pricing.subtitle': 'משלמים על פתרונות, לא על שיחות. העברה לנציג אנושי? תמיד בחינם.',
        'pricing.plan': 'סטארטר',
        'pricing.description': 'לעצמאים ועסקים קטנים שרוצים לשדרג את שירות הלקוחות',
        'pricing.amount': '\u20AA350',
        'pricing.period': '/ חודש',
        'pricing.seatPrice': '+\u20AA90',
        'pricing.addon1': 'למשתמש נוסף',
        'pricing.resolutionPrice': '+\u20AA3.50',
        'pricing.addon2': 'לפתרון AI',
        'pricing.cta': 'יאללה, מתחילים',
        'pricing.features': 'מה כלול:',
        'pricing.f1': '100 פתרונות AI בחודש',
        'pricing.f2': '2 משתמשים (מנהל + נציג)',
        'pricing.f3': 'העברות ללא הגבלה',
        'pricing.f4': 'שיחות AI ללא הגבלה*',
        'pricing.f5': 'וואטסאפ + צ\'אט באתר',
        'faq.title': 'שאלות? יש תשובות.',
        'faq.subtitle': 'AI, אוטומציה, סוכנים חכמים — הרבה באזז וורדס. בואו נפשט את זה.',
        'faq.q1': 'מה זה בעצם Cardynal?',
        'faq.a1': 'פלטפורמת שירות לקוחות מנוהלת לחלוטין. אנחנו מקימים סוכני AI שמנהלים שיחות עם לקוחות בוואטסאפ, באתר, ובכל הערוצים שלך.',
        'faq.q2': 'מה ההבדל מ-Intercom או Zendesk?',
        'faq.a2': 'אלה מערכות Help Desk שהדביקו להן AI בצד. אצלנו ה-AI במרכז — ואנחנו מנהלים הכל בשבילך.',
        'faq.q3': 'איך עובד החיבור לוואטסאפ?',
        'faq.a3': 'בדיוק כמו WhatsApp Web. סורקים QR עם הטלפון — והוואטסאפ שלך מחובר. בלי אישורים מפייסבוק, בלי API מסובך.',
        'faq.q4': 'צריך ידע טכני?',
        'faq.a4': 'ממש לא. אנחנו מטפלים בכל הטכנולוגיה. אתה משתמש בדשבורד לעקוב אחרי שיחות, לראות סטטיסטיקות, ולקבל החלטות עסקיות.',
        'faq.q5': 'באילו ערוצים אתם תומכים?',
        'faq.a5': 'וואטסאפ, צ\'אט באתר, אינסטגרם, פייסבוק, טלגרם, דיסקורד, ו-API לחיבורים מותאמים. אימייל ו-SMS בקרוב.',
        'faq.q6': 'מה אם אני לא מרוצה?',
        'faq.a6': 'יש שלב POC — בודקים עם שיחות אמיתיות לפני התחייבות. בלי חוזים ארוכי טווח.',
        'faq.q7': 'כמה זמן לוקח להקים?',
        'faq.a7': '48 שעות מהרגע שמתחילים. רוב הזמן זה אנחנו — בונים תסריטים וטוענים את בסיס הידע שלך.',
        'faq.q8': 'איך מוסיפים את הצ\'אט לאתר וורדפרס?',
        'faq.a8': 'תוסף וורדפרס שמתקין בקליק אחד. מפעילים, מדביקים מפתח — והווידג\'ט באוויר.',
        'blog.title': 'מאמרים אחרונים',
        'blog.viewAll': 'לכל המאמרים',
        'footer.tagline': 'שירות לקוחות Human + AI מנוהל לחלוטין, מהיום הראשון.',
        'footer.product': 'מוצר',
        'footer.company': 'חברה',
        'footer.legal': 'משפטי',
        'footer.blog': 'בלוג',
        'footer.about': 'אודות',
        'footer.contact': 'צור קשר',
        'footer.privacy': 'פרטיות',
        'footer.terms': 'תנאים',
        'footer.getInTouch': 'בוא נדבר',
        'pricing.roiBtn': 'חשב את ה-ROI שלך',
        'pricing.resolution': 'מה זה פתרון?',
        'pricing.resolutionDesc': 'כשה-AI מטפל בהצלחה בבקשת לקוח — עונה על שאלה, פותר בעיה, מספק מידע. שיחות שעברו לנציג והודעות בדיקה לא נספרות. משלמים רק כשה-AI מספק ערך.',
        'roi.title': 'חשב את ה-ROI שלך',
        'roi.subtitle': 'גלה כמה תוכל לחסוך עם Cardynal',
        'roi.monthlyConversations': 'שיחות תמיכה חודשיות',
        'roi.avgHandleTime': 'זמן טיפול ממוצע (דקות)',
        'roi.agentHourlyCost': 'עלות שעתית של נציג',
        'roi.aiResolutionRate': 'שיעור פתרון AI (%)',
        'roi.monthlySavings': 'חיסכון חודשי',
        'roi.currentCost': 'עלות חודשית נוכחית',
        'roi.withCardynal': 'עם Cardynal',
        'roi.hoursRecovered': 'שעות שהושבו/חודש',
        'roi.disclaimer': '*מבוסס על \u20AA350/חודש + \u20AA3.50 לפתרון. התוצאות עשויות להשתנות.',
        'roi.cta': 'יאללה, מתחילים'
      }
    };

    // Widget translations - now imported from ./js/i18n/index.js
    const _UNUSED_WIDGET_TRANSLATIONS = {
      en: {
        // Chat Flow Demo - conversations
        chat: {
          billing: {
            c1: 'Why was I charged $49 twice this month?',
            a1: 'Let me check your billing history right away.',
            a2: "You're right — I found a duplicate charge. This was a system error on our end. I'm initiating a refund now.",
            a3: "Refund processed! You'll see $49 back in your account within 2-3 days. I've also flagged this to prevent future duplicates.",
            c2: 'Great, thanks for sorting it out quickly.',
            a4: 'Of course! Sorry for the confusion. Anything else I can help with?'
          },
          order: {
            c1: "Where is my order #4521? It's been 5 days.",
            a1: 'Let me look that up for you right away.',
            a2: "I see your order is delayed at a sorting facility. This is unusual — let me escalate to our logistics team.",
            note: 'Customer frustrated (5 days wait). Order #4521 stuck at sorting. Needs priority resolution + compensation.',
            h1: "Hi Noa! I'm taking over. Let me contact the carrier directly.",
            h2: "Good news — I've flagged your package for priority handling. It'll arrive tomorrow by 6pm.",
            c2: "That's great, thank you so much!",
            h3: "You're welcome! I've also added a 15% discount to your next order as an apology for the delay."
          },
          tech: {
            c1: 'The API is throwing a 500 error on POST requests.',
            a1: 'Got it — let me check our system status.',
            a2: 'Our systems are fully operational. The 500 might be due to an invalid payload. Can you share your request body?',
            c2: 'Here it is: {"user": "test", "action": "create"}',
            a3: 'Found it! Your payload is missing the required "api_key" field. Add it and you should be good.',
            c3: 'That fixed it! Thanks a lot.',
            a4: 'Perfect! Let me know if you need anything else.'
          }
        },
        // Playbook Widget
        playbook: {
          step1: 'Customer requesting refund',
          step2: 'Matching policy rules',
          step3: 'Order #12847 confirmed',
          step4: 'Response sent in 4.2s'
        },
        // Tree Widget
        tree: {
          step1: '"My order is late!"',
          step2trigger: 'High frustration',
          branchLeftBlocked: 'Blocked',
          branchRight: 'Routing to Maya'
        },
        // RAG Widget
        rag: {
          userQuestion: 'What is the refund policy?',
          answer: 'Refunds are processed within <strong>14 business days</strong> of receiving the returned item.'
        }
      },
      fr: {
        // Chat Flow Demo - conversations
        chat: {
          billing: {
            c1: 'Pourquoi ai-je ete debite de 49€ deux fois ce mois-ci ?',
            a1: 'Laissez-moi verifier votre historique de facturation immediatement.',
            a2: "Vous avez raison — j'ai trouve un double debit. C'etait une erreur systeme de notre cote. Je lance le remboursement.",
            a3: "Remboursement effectue ! Vous verrez 49€ sur votre compte dans 2-3 jours. J'ai aussi signale cela pour eviter les doublons.",
            c2: 'Super, merci d\'avoir regle ca rapidement.',
            a4: 'Bien sur ! Desole pour la confusion. Autre chose ?'
          },
          order: {
            c1: 'Ou est ma commande #4521 ? Ca fait 5 jours.',
            a1: 'Laissez-moi verifier ca pour vous immediatement.',
            a2: 'Je vois que votre commande est bloquee au centre de tri. C\'est inhabituel — je transfere a notre equipe logistique.',
            note: 'Client frustre (5 jours). Commande #4521 bloquee au tri. Priorite + compensation.',
            h1: 'Bonjour Noa ! Je prends le relais. Je contacte le transporteur.',
            h2: 'Bonne nouvelle — j\'ai marque votre colis en priorite. Il arrivera demain avant 18h.',
            c2: 'Super, merci beaucoup !',
            h3: 'Je vous en prie ! J\'ai aussi ajoute 15% de remise sur votre prochaine commande pour le retard.'
          },
          tech: {
            c1: 'L\'API renvoie une erreur 500 sur les requetes POST.',
            a1: 'Compris — laissez-moi verifier le statut du systeme.',
            a2: 'Nos systemes fonctionnent normalement. L\'erreur 500 peut etre due a un payload invalide. Pouvez-vous partager le body ?',
            c2: 'Voici : {"user": "test", "action": "create"}',
            a3: 'Trouve ! Il manque le champ obligatoire "api_key". Ajoutez-le et ca devrait marcher.',
            c3: 'Ca marche maintenant ! Merci beaucoup.',
            a4: 'Parfait ! N\'hesitez pas si vous avez besoin d\'autre chose.'
          }
        },
        // Playbook Widget
        playbook: {
          step1: 'Le client demande un remboursement',
          step2: 'Verification des regles',
          step3: 'Commande #12847 confirmee',
          step4: 'Reponse envoyee en 4.2s'
        },
        // Tree Widget
        tree: {
          step1: '"Ma commande est en retard !"',
          step2trigger: 'Frustration elevee',
          branchLeftBlocked: 'Bloque',
          branchRight: 'Transfert vers Maya'
        },
        // RAG Widget
        rag: {
          userQuestion: 'Quelle est la politique de remboursement ?',
          answer: 'Les remboursements sont traites sous <strong>14 jours ouvrables</strong> apres reception de l\'article retourne.'
        }
      },
      he: {
        // Chat Flow Demo - conversations
        chat: {
          billing: {
            c1: 'למה חוייבתי 49$ פעמיים החודש?',
            a1: 'תן לי לבדוק את היסטוריית החיובים שלך מיד.',
            a2: 'אתה צודק — מצאתי חיוב כפול. זו היתה שגיאת מערכת מצידנו. אני מתחיל בהחזר עכשיו.',
            a3: 'ההחזר בוצע! תראה 49$ בחשבונך תוך 2-3 ימים. גם סימנתי את זה כדי למנוע כפילויות בעתיד.',
            c2: 'מעולה, תודה שטיפלת בזה מהר.',
            a4: 'כמובן! סליחה על הבלבול. משהו נוסף?'
          },
          order: {
            c1: 'איפה ההזמנה שלי #4521? עברו 5 ימים.',
            a1: 'תן לי לבדוק את זה עבורך מיד.',
            a2: 'אני רואה שההזמנה שלך תקועה במרכז המיון. זה לא רגיל — אני מעביר לצוות הלוגיסטיקה.',
            note: 'לקוח מתוסכל (5 ימים). הזמנה #4521 תקועה במיון. דרוש פתרון מהיר + פיצוי.',
            h1: 'היי נועה! אני לוקחת את זה מכאן. אני פונה ישירות לשליח.',
            h2: 'חדשות טובות — סימנתי את החבילה שלך לטיפול מועדף. היא תגיע מחר עד 18:00.',
            c2: 'מעולה, תודה רבה!',
            h3: 'בשמחה! הוספתי גם 15% הנחה להזמנה הבאה שלך כפיצוי על העיכוב.'
          },
          tech: {
            c1: 'ה-API מחזיר שגיאה 500 בבקשות POST.',
            a1: 'הבנתי — תן לי לבדוק את סטטוס המערכת.',
            a2: 'המערכות שלנו עובדות כרגיל. השגיאה 500 עשויה להיות בגלל payload לא תקין. אפשר לשתף את גוף הבקשה?',
            c2: 'הנה: {"user": "test", "action": "create"}',
            a3: 'מצאתי! חסר השדה הנדרש "api_key". הוסף אותו וזה אמור לעבוד.',
            c3: 'זה עובד עכשיו! תודה רבה.',
            a4: 'מצוין! ספר לי אם צריך משהו נוסף.'
          }
        },
        // Playbook Widget
        playbook: {
          step1: 'הלקוח מבקש החזר',
          step2: 'בודק את כללי המדיניות',
          step3: 'הזמנה #12847 אושרה',
          step4: 'תגובה נשלחה ב-4.2 שניות'
        },
        // Tree Widget
        tree: {
          step1: '"ההזמנה שלי מאחרת!"',
          step2trigger: 'תסכול גבוה',
          branchLeftBlocked: 'חסום',
          branchRight: 'מעביר למאיה'
        },
        // RAG Widget
        rag: {
          userQuestion: 'מה מדיניות ההחזרים?',
          answer: 'החזרים מעובדים תוך <strong>14 ימי עסקים</strong> מקבלת הפריט המוחזר.'
        }
      }
    };

    // Helper to get widget translation
    function wt(path) {
      const parts = path.split('.');
      let val = WIDGET_TRANSLATIONS[currentLang];
      for (const part of parts) {
        val = val?.[part];
      }
      if (val === undefined) {
        val = WIDGET_TRANSLATIONS['en'];
        for (const part of parts) {
          val = val?.[part];
        }
      }
      return val || path;
    }

    // Current language - detect from URL first, then localStorage
    const urlPath = window.location.pathname;
    let urlLang = null;
    if (urlPath.startsWith('/fr')) urlLang = 'fr';
    else if (urlPath.startsWith('/he')) urlLang = 'he';
    let currentLang = urlLang || localStorage.getItem('cardynal_lang') || 'en';

    // Translate function
    function t(key) {
      return TRANSLATIONS[currentLang]?.[key] || TRANSLATIONS['en']?.[key] || key;
    }

    // Apply translations
    function translatePage() {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = t(key);
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.placeholder = translation;
        } else {
          el.innerHTML = translation;
        }
      });

      // Update HTML lang and direction
      document.documentElement.lang = currentLang;
      document.documentElement.dir = currentLang === 'he' ? 'rtl' : 'ltr';

      // Update select value
      const langSelect = document.getElementById('langSelect');
      if (langSelect) {
        langSelect.value = currentLang;
      }

      // Update dashboard preview
      updateDashboardPreview();
    }

    // Dashboard preview based on theme and language
    function updateDashboardPreview() {
      const preview = document.getElementById('dashboard-preview');
      if (!preview) return;
      const theme = localStorage.getItem('cardynal_theme') === 'light' ? 'light' : 'dark';
      const lang = currentLang === 'he' ? 'he' : 'en';
      preview.src = `/dashboard-${theme}-${lang}.png`;
    }

    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    let isDark = localStorage.getItem('cardynal_theme') !== 'light';

    function applyTheme() {
      document.body.classList.toggle('light-mode', !isDark);
      updateDashboardPreview();
    }

    themeToggle?.addEventListener('click', () => {
      isDark = !isDark;
      localStorage.setItem('cardynal_theme', isDark ? 'dark' : 'light');
      applyTheme();
    });

    applyTheme();

    // Mobile menu
    const menuBtn = document.getElementById('menuBtn');
    const mainNav = document.getElementById('mainNav');

    menuBtn?.addEventListener('click', () => {
      mainNav.classList.toggle('is-open');
    });

    // Header scroll
    const header = document.querySelector('.landing-header');
    window.addEventListener('scroll', () => {
      header.classList.toggle('is-scrolled', window.pageYOffset > 50);
    });

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(anchor.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          mainNav?.classList.remove('is-open');
        }
      });
    });

    // FAQ accordion
    document.querySelectorAll('.faq-item').forEach(item => {
      item.addEventListener('toggle', () => {
        if (item.open) {
          document.querySelectorAll('.faq-item').forEach(other => {
            if (other !== item) other.open = false;
          });
        }
      });
    });

    // Chat animation
    // ============================================
    // CHAT FLOW DEMO WIDGET
    // ============================================
    const CHAT_CONFIG = {
      theme: 'dark',
      defaultLabels: {
        customer: 'Sam',
        ai: 'Cardynal AI',
        human: 'Support Agent: Maya'
      },
      timings: {
        typingMin: 800,
        typingMax: 1500,
        afterMessage: 200,
        afterSystem: 400,
        betweenFlows: 2500
      },
      maxVisibleMessages: 15,
      playMode: 'sequential',
      flows: [
        {
          name: 'Billing Inquiry',
          messages: [
            { type: 'customer', text: wt('chat.billing.c1') },
            { type: 'ai', text: wt('chat.billing.a1') },
            { type: 'system', text: 'Intent: billing_dispute' },
            { type: 'tool', text: 'GET /billing/history?customer=sam_291', glow: true },
            { type: 'tool', text: 'Found: 2 charges of $49 on Jan 15' },
            { type: 'system', text: 'Analysis: Duplicate charge detected' },
            { type: 'ai', text: wt('chat.billing.a2') },
            { type: 'tool', text: 'POST /refunds/create', glow: true },
            { type: 'tool', text: 'Refund: $49.00' },
            { type: 'ai', text: wt('chat.billing.a3') },
            { type: 'customer', text: wt('chat.billing.c2') },
            { type: 'ai', text: wt('chat.billing.a4') }
          ]
        },
        {
          name: 'Order Tracking with Escalation',
          messages: [
            { type: 'customer', label: 'Noa', text: wt('chat.order.c1') },
            { type: 'ai', text: wt('chat.order.a1') },
            { type: 'system', text: 'Intent: order_tracking' },
            { type: 'system', text: 'Customer sentiment: frustrated' },
            { type: 'tool', text: 'GET /orders/4521', glow: true },
            { type: 'tool', text: 'Status: Stuck at sorting facility' },
            { type: 'ai', text: wt('chat.order.a2') },
            { type: 'system', text: 'Escalating to human agent' },
            { type: 'note', label: 'Handoff Note', text: wt('chat.order.note') },
            { type: 'human', label: 'Maya — Support', text: wt('chat.order.h1') },
            { type: 'human', text: wt('chat.order.h2') },
            { type: 'customer', label: 'Noa', text: wt('chat.order.c2') },
            { type: 'human', text: wt('chat.order.h3') }
          ]
        },
        {
          name: 'Technical Support',
          messages: [
            { type: 'customer', label: 'Alex', text: wt('chat.tech.c1') },
            { type: 'ai', text: wt('chat.tech.a1') },
            { type: 'system', text: 'Intent detected: technical_issue' },
            { type: 'tool', text: 'GET /status/current', glow: true },
            { type: 'tool', text: 'All systems operational' },
            { type: 'ai', text: wt('chat.tech.a2') },
            { type: 'customer', label: 'Alex', text: wt('chat.tech.c2') },
            { type: 'tool', text: 'POST /validate/json', glow: true },
            { type: 'tool', text: 'Missing required field: api_key' },
            { type: 'ai', text: wt('chat.tech.a3') },
            { type: 'customer', label: 'Alex', text: wt('chat.tech.c3') },
            { type: 'ai', text: wt('chat.tech.a4') }
          ]
        }
      ]
    };

    class ChatFlowDemo {
      constructor(containerId, config) {
        this.container = document.getElementById(containerId);
        if (!this.container) return;
        this.config = config;
        this.messages = [];
        this.isRunning = false;
        this.currentTimeout = null;
        this.currentFlowIndex = 0;
        this.reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        this.init();
      }

      init() {
        this.render();
        this.start();
        window.matchMedia('(prefers-reduced-motion: reduce)').addEventListener('change', (e) => {
          this.reducedMotion = e.matches;
        });
      }

      render() {
        this.container.innerHTML = `
          <div class="cfd-container">
            <div class="cfd-wrapper">
              <div class="cfd-header">
                <div class="cfd-header__back">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 18l-6-6 6-6"/>
                  </svg>
                </div>
                <div class="cfd-header__logo">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M13 3L4 14h7v7l9-11h-7V3z" fill="currentColor"/>
                  </svg>
                </div>
                <div class="cfd-header__info">
                  <span class="cfd-header__title">Cardynal AI</span>
                  <div class="cfd-header__status">
                    <span class="cfd-header__online-dot"></span>
                    <span>Online</span>
                  </div>
                </div>
              </div>
              <div class="cfd-messages" id="cfd-messages"></div>
            </div>
          </div>
        `;
        this.messagesContainer = this.container.querySelector('#cfd-messages');
      }

      start() {
        this.isRunning = true;
        this.runLoop();
      }

      stop() {
        this.isRunning = false;
        if (this.currentTimeout) {
          clearTimeout(this.currentTimeout);
          this.currentTimeout = null;
        }
      }

      async runLoop() {
        while (this.isRunning) {
          const flow = this.getNextFlow();
          await this.runFlow(flow);
          if (this.isRunning) {
            await this.delay(this.config.timings.betweenFlows);
          }
        }
      }

      getNextFlow() {
        const flows = this.config.flows;
        if (this.config.playMode === 'random') {
          return flows[Math.floor(Math.random() * flows.length)];
        } else {
          const flow = flows[this.currentFlowIndex];
          this.currentFlowIndex = (this.currentFlowIndex + 1) % flows.length;
          return flow;
        }
      }

      async runFlow(flow) {
        for (const msg of flow.messages) {
          if (!this.isRunning) break;
          const showTyping = msg.typing !== false &&
            (msg.type === 'customer' || msg.type === 'ai' || msg.type === 'human');
          const label = msg.label || this.config.defaultLabels[msg.type] || null;
          if (showTyping) {
            await this.showTyping(msg.type, label);
          }
          await this.addMessage(msg.type, label, msg.text, msg.glow || false);
          const delayTime = msg.delay ||
            (msg.type === 'system' || msg.type === 'tool'
              ? this.config.timings.afterSystem
              : this.config.timings.afterMessage);
          await this.delay(delayTime);
        }
      }

      async addMessage(type, label, content, withGlow = false) {
        const message = { type, label, content, withGlow, id: Date.now() + Math.random() };
        this.messages.push(message);
        while (this.messages.length > this.config.maxVisibleMessages) {
          await this.removeOldestMessage();
        }
        this.renderMessage(message);
      }

      renderMessage(message) {
        const el = document.createElement('div');
        el.className = `cfd-message cfd-message--${message.type}`;
        if (message.withGlow) el.classList.add('cfd-glow');
        el.dataset.id = message.id;

        let html = '';
        if (message.type === 'note') {
          const headerText = message.label || 'Internal Note';
          html += `<div class="cfd-bubble"><div class="cfd-note-header">${headerText}</div>${this.escapeHtml(message.content)}</div>`;
        } else {
          if (message.label && (message.type === 'customer' || message.type === 'ai' || message.type === 'human')) {
            html += `<span class="cfd-message__label">${message.label}</span>`;
          }
          html += `<div class="cfd-bubble">${this.escapeHtml(message.content)}</div>`;
        }
        el.innerHTML = html;
        this.messagesContainer.appendChild(el);
      }

      async removeOldestMessage() {
        const oldest = this.messages.shift();
        const el = this.messagesContainer.querySelector(`[data-id="${oldest.id}"]`);
        if (el) {
          el.classList.add('cfd-exiting');
          await this.delay(this.reducedMotion ? 0 : 300);
          el.remove();
        }
      }

      async showTyping(type, label) {
        const typingId = 'typing-' + Date.now();
        const el = document.createElement('div');
        el.className = `cfd-message cfd-message--${type}`;
        el.dataset.id = typingId;

        let html = '';
        if (label) {
          html += `<span class="cfd-message__label">${label}</span>`;
        }
        html += `
          <div class="cfd-typing">
            <span class="cfd-typing__dot"></span>
            <span class="cfd-typing__dot"></span>
            <span class="cfd-typing__dot"></span>
          </div>
        `;
        el.innerHTML = html;
        this.messages.push({ id: typingId, isTyping: true, type });
        while (this.messages.length > this.config.maxVisibleMessages) {
          await this.removeOldestMessage();
        }
        this.messagesContainer.appendChild(el);
        const duration = this.getRandomInt(this.config.timings.typingMin, this.config.timings.typingMax);
        await this.delay(this.reducedMotion ? 150 : duration);
        const typingIndex = this.messages.findIndex(m => m.id === typingId);
        if (typingIndex > -1) {
          this.messages.splice(typingIndex, 1);
        }
        el.remove();
      }

      getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      delay(ms) {
        return new Promise(resolve => {
          this.currentTimeout = setTimeout(resolve, ms);
        });
      }

      escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }
    }

    // Initialize Chat Flow Demo
    let chatFlowInstance = null;
    function initChatFlow() {
      if (chatFlowInstance) {
        chatFlowInstance.stop();
      }
      chatFlowInstance = new ChatFlowDemo('chat-flow-demo', CHAT_CONFIG);
    }
    setTimeout(initChatFlow, 500);

    // ============================================
    // PLAYBOOK FLOW WIDGET
    // ============================================
    (function initPlaybookWidget() {
      const CONFIG = {
        stepDuration: 1800,
        pauseAtEnd: 2500,
      };

      const steps = [
        {
          icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><path d="M8 9h8M8 13h6"></path></svg>`,
          title: "Intent detected",
          desc: wt('playbook.step1'),
          status: "Analyzing"
        },
        {
          icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v18M3 12h18M5.6 5.6l12.8 12.8M18.4 5.6 5.6 18.4"/><circle cx="12" cy="12" r="3"/></svg>`,
          title: "AI playbook",
          desc: wt('playbook.step2'),
          status: "Processing"
        },
        {
          icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path><path d="M3 12c0 1.66 4 3 9 3s9-1.34 9-3"></path></svg>`,
          title: "Data verified",
          desc: wt('playbook.step3'),
          status: "Validating"
        },
        {
          icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 2 11 13M22 2l-7 20-4-9-9-4 20-7z"></path></svg>`,
          title: "Resolved",
          desc: wt('playbook.step4'),
          status: "Complete"
        }
      ];

      const track = document.getElementById('pbw-track');
      const progressBar = document.getElementById('pbw-progress');
      if (!track || !progressBar) return;

      let html = '';
      steps.forEach((step, i) => {
        html += `
          <div class="pbw-node" id="pbw-node-${i}">
            <span class="pbw-step-badge">${i + 1}</span>
            <div class="pbw-icon">${step.icon}</div>
            <div class="pbw-title">${step.title}</div>
            <div class="pbw-desc">${step.desc}</div>
            <div class="pbw-status">
              <span class="pbw-status-dot"></span>
              ${step.status}
            </div>
          </div>
        `;
        if (i < steps.length - 1) {
          html += `<div class="pbw-line" id="pbw-line-${i}"></div>`;
        }
      });
      track.innerHTML = html;

      const nodes = Array.from(document.querySelectorAll('.pbw-node'));
      const lines = Array.from(document.querySelectorAll('.pbw-line'));

      const centerOnNode = (index) => {
        const node = nodes[index];
        if (!node) return;
        const offset = node.offsetLeft + (node.offsetWidth / 2);
        track.style.transform = `translateX(-${offset}px)`;
      };

      const updateProgress = (index) => {
        const percent = ((index + 1) / steps.length) * 100;
        progressBar.style.width = `${percent}%`;
      };

      const resetAll = () => {
        nodes.forEach(n => n.classList.remove('active', 'passed', 'success'));
        lines.forEach(l => l.classList.remove('active', 'complete'));
        progressBar.style.width = '0%';
      };

      let currentIndex = 0;
      let timeoutId = null;

      const animateStep = () => {
        for (let i = 0; i < currentIndex; i++) {
          nodes[i].classList.remove('active', 'success');
          nodes[i].classList.add('passed');
          if (lines[i]) lines[i].classList.add('active', 'complete');
        }

        const node = nodes[currentIndex];
        node.classList.remove('passed');
        if (currentIndex === steps.length - 1) {
          node.classList.add('success');
        } else {
          node.classList.add('active');
        }

        centerOnNode(currentIndex);
        updateProgress(currentIndex);

        if (currentIndex < steps.length - 1) {
          currentIndex++;
          timeoutId = setTimeout(animateStep, CONFIG.stepDuration);
        } else {
          timeoutId = setTimeout(() => {
            resetAll();
            currentIndex = 0;
            centerOnNode(0);
            timeoutId = setTimeout(animateStep, 600);
          }, CONFIG.pauseAtEnd);
        }
      };

      setTimeout(() => {
        centerOnNode(0);
        setTimeout(animateStep, 800);
      }, 400);
    })();

    // ============================================
    // TREE WIDGET (Escalation)
    // ============================================
    (function initTreeWidget() {
      const treeData = {
        step1: {
          title: "Incoming chat",
          desc: wt('tree.step1'),
          icon: `<svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"/></svg>`
        },
        step2: {
          title: "AI analysis",
          desc: "Processing...",
          descTrigger: wt('tree.step2trigger'),
          icon: `<svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09Z"/></svg>`
        },
        branchLeft: {
          title: "Auto-reply",
          desc: "Template ready",
          descBlocked: wt('tree.branchLeftBlocked'),
          icon: `<svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"/></svg>`
        },
        branchRight: {
          title: "Human agent",
          desc: wt('tree.branchRight'),
          icon: `<svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"/></svg>`
        }
      };

      const $ = id => document.getElementById(id);
      const els = {
        n1: $('tw-n1'), n2: $('tw-n2'),
        n3Left: $('tw-n3-left'), n3Right: $('tw-n3-right'),
        l1: $('tw-l1'), l2: $('tw-l2'),
        armLeft: $('tw-arm-left'), armRight: $('tw-arm-right'),
        d2: $('tw-d2'), d3l: $('tw-d3l')
      };

      if (!els.n1) return;

      const setContent = (suffix, data) => {
        const icon = $(`tw-i${suffix}`);
        const title = $(`tw-t${suffix}`);
        const desc = $(`tw-d${suffix}`);
        if (icon) icon.innerHTML = data.icon;
        if (title) title.textContent = data.title;
        if (desc) desc.textContent = data.desc;
      };

      setContent('1', treeData.step1);
      setContent('2', treeData.step2);
      setContent('3l', treeData.branchLeft);
      setContent('3r', treeData.branchRight);

      const timings = {
        step1: 200, line1: 1000, step2Blue: 1600, step2Orange: 2600,
        line2: 3200, armLeft: 3600, step3Left: 3900, step3LeftReject: 5000,
        armRight: 5300, step3Right: 5600, loopStart: 8000
      };

      let timeoutIds = [];
      const schedule = (fn, delay) => { const id = setTimeout(fn, delay); timeoutIds.push(id); };
      const clearAll = () => { timeoutIds.forEach(clearTimeout); timeoutIds = []; };

      const resetAnimation = () => {
        [els.n1, els.n2, els.n3Left, els.n3Right].forEach(n => {
          if (n) n.classList.remove('active-blue', 'active-orange', 'active-red', 'rejected', 'shake');
        });
        [els.l1, els.l2].forEach(l => { if (l) l.classList.remove('active', 'active-orange'); });
        [els.armLeft, els.armRight].forEach(a => { if (a) a.classList.remove('active'); });
        if (els.d2) { els.d2.textContent = treeData.step2.desc; els.d2.style.color = ''; }
        if (els.d3l) els.d3l.textContent = treeData.branchLeft.desc;
      };

      const playAnimation = () => {
        clearAll();
        resetAnimation();

        schedule(() => els.n1.classList.add('active-blue'), timings.step1);
        schedule(() => els.l1.classList.add('active'), timings.line1);
        schedule(() => els.n2.classList.add('active-blue'), timings.step2Blue);
        schedule(() => {
          els.n2.classList.remove('active-blue');
          els.n2.classList.add('active-orange');
          els.d2.textContent = treeData.step2.descTrigger;
          els.d2.style.color = 'var(--tw-orange)';
        }, timings.step2Orange);
        schedule(() => els.l2.classList.add('active', 'active-orange'), timings.line2);
        schedule(() => els.armLeft.classList.add('active'), timings.armLeft);
        schedule(() => {
          els.n3Left.classList.add('active-red', 'shake');
        }, timings.step3Left);
        schedule(() => {
          els.n3Left.classList.remove('active-red', 'shake');
          els.n3Left.classList.add('rejected');
          els.d3l.textContent = treeData.branchLeft.descBlocked;
        }, timings.step3LeftReject);
        schedule(() => els.armRight.classList.add('active'), timings.armRight);
        schedule(() => els.n3Right.classList.add('active-orange'), timings.step3Right);
        schedule(playAnimation, timings.loopStart);
      };

      schedule(playAnimation, 600);
    })();

    // RAG Widget Animation
    (function() {
      const $ = id => document.getElementById(id);
      const els = {
        chat: $('rag-chat'),
        userMsg: $('rag-user-msg'),
        aiMsg: $('rag-ai-msg'),
        thinking: $('rag-thinking'),
        aiText: $('rag-ai-text'),
        source: $('rag-source'),
        beam: $('rag-beam'),
        labelRetrieval: $('rag-label-retrieval'),
        labelGeneration: $('rag-label-generation'),
        doc1: $('rag-doc-1'),
        docTarget: $('rag-doc-target'),
        doc3: $('rag-doc-3')
      };

      if (!els.chat) return;

      // Set user message with translation
      els.userMsg.textContent = wt('rag.userQuestion');

      const data = {
        thinking: "Scanning knowledge base...",
        answer: wt('rag.answer')
      };

      const timings = {
        userMsg: 400,
        aiMsgThinking: 800,
        beamUp: 1200,
        doc1Scan: 1400,
        doc3Scan: 1600,
        targetFound: 2000,
        beamDown: 2600,
        showAnswer: 3200,
        showSource: 3600,
        loopStart: 6500
      };

      let timeoutIds = [];
      const schedule = (fn, delay) => {
        const id = setTimeout(fn, delay);
        timeoutIds.push(id);
        return id;
      };
      const clearAll = () => {
        timeoutIds.forEach(clearTimeout);
        timeoutIds = [];
      };

      const resetAnimation = () => {
        els.userMsg.classList.remove('visible');
        els.aiMsg.classList.remove('visible');
        els.chat.classList.remove('active');
        els.thinking.style.display = 'flex';
        els.aiText.style.display = 'none';
        els.aiText.classList.remove('answered');
        els.aiText.innerHTML = data.thinking;
        els.source.classList.remove('visible');
        els.beam.classList.remove('scan-up', 'scan-down');
        els.beam.style.opacity = '0';
        els.labelRetrieval.classList.remove('active');
        els.labelGeneration.classList.remove('active');
        [els.doc1, els.docTarget, els.doc3].forEach(doc => {
          if (doc) doc.classList.remove('scanned', 'target');
        });
      };

      const playAnimation = () => {
        clearAll();
        resetAnimation();

        schedule(() => {
          els.userMsg.classList.add('visible');
          els.chat.classList.add('active');
        }, timings.userMsg);

        schedule(() => els.aiMsg.classList.add('visible'), timings.aiMsgThinking);

        schedule(() => {
          els.labelRetrieval.classList.add('active');
          els.beam.classList.add('scan-up');
        }, timings.beamUp);

        schedule(() => els.doc1.classList.add('scanned'), timings.doc1Scan);
        schedule(() => els.doc3.classList.add('scanned'), timings.doc3Scan);

        schedule(() => {
          els.docTarget.classList.add('target');
          els.labelRetrieval.classList.remove('active');
        }, timings.targetFound);

        schedule(() => {
          els.beam.classList.remove('scan-up');
          els.beam.classList.add('scan-down');
          els.labelGeneration.classList.add('active');
        }, timings.beamDown);

        schedule(() => {
          els.thinking.style.display = 'none';
          els.aiText.style.display = 'block';
          els.aiText.innerHTML = data.answer;
          els.aiText.classList.add('answered');
          els.labelGeneration.classList.remove('active');
        }, timings.showAnswer);

        schedule(() => els.source.classList.add('visible'), timings.showSource);
        schedule(playAnimation, timings.loopStart);
      };

      schedule(playAnimation, 800);
    })();

    // Omnichannel Widget Animation
    (function() {
      const $ = id => document.getElementById(id);
      const logo = $('omni-logo');
      const outputLine = $('omni-output-line');
      const inbox = $('omni-inbox');
      const inboxBadge = $('omni-inbox-badge');

      if (!logo) return;

      const channels = [
        { id: 'omni-ch-0', lineId: 'omni-line-0', packetId: 'omni-packet-0', x1: 160, y1: 72, x2: 160, y2: 128 },
        { id: 'omni-ch-1', lineId: 'omni-line-1', packetId: 'omni-packet-1', x1: 228, y1: 108, x2: 192, y2: 138 },
        { id: 'omni-ch-2', lineId: 'omni-line-2', packetId: 'omni-packet-2', x1: 245, y1: 180, x2: 195, y2: 172 },
        { id: 'omni-ch-3', lineId: 'omni-line-3', packetId: 'omni-packet-3', x1: 212, y1: 230, x2: 185, y2: 195 },
        { id: 'omni-ch-4', lineId: 'omni-line-4', packetId: 'omni-packet-4', x1: 108, y1: 230, x2: 135, y2: 195 },
        { id: 'omni-ch-5', lineId: 'omni-line-5', packetId: 'omni-packet-5', x1: 75, y1: 180, x2: 125, y2: 172 },
        { id: 'omni-ch-6', lineId: 'omni-line-6', packetId: 'omni-packet-6', x1: 92, y1: 108, x2: 128, y2: 138 }
      ];

      const CONFIG = {
        channelDuration: 650,
        processingDuration: 350,
        outputDuration: 300,
        pauseBetween: 120,
        loopDelay: 1500
      };

      let messageCount = 0;
      let timeoutIds = [];

      const schedule = (fn, delay) => {
        const id = setTimeout(fn, delay);
        timeoutIds.push(id);
        return id;
      };

      const clearAll = () => {
        timeoutIds.forEach(clearTimeout);
        timeoutIds = [];
      };

      const resetAll = () => {
        channels.forEach(ch => {
          const el = $(ch.id);
          const line = $(ch.lineId);
          const packet = $(ch.packetId);
          if (el) el.classList.remove('active');
          if (line) line.classList.remove('active');
          if (packet) packet.classList.remove('active');
        });
        logo.classList.remove('processing', 'success');
        outputLine.classList.remove('active');
        inbox.classList.remove('active');
        messageCount = 0;
        inboxBadge.textContent = '+1';
      };

      const animatePacket = (channel, onComplete) => {
        const packet = $(channel.packetId);
        if (!packet) { onComplete && onComplete(); return; }
        const duration = 300;
        const start = performance.now();

        packet.classList.add('active');
        packet.setAttribute('cx', channel.x1);
        packet.setAttribute('cy', channel.y1);

        const animate = (now) => {
          const elapsed = now - start;
          const progress = Math.min(elapsed / duration, 1);
          const eased = 1 - Math.pow(1 - progress, 3);
          const x = channel.x1 + (channel.x2 - channel.x1) * eased;
          const y = channel.y1 + (channel.y2 - channel.y1) * eased;
          packet.setAttribute('cx', x);
          packet.setAttribute('cy', y);
          if (progress < 1) {
            requestAnimationFrame(animate);
          } else {
            packet.classList.remove('active');
            onComplete && onComplete();
          }
        };
        requestAnimationFrame(animate);
      };

      const animateChannel = (channelIndex, callback) => {
        const channel = channels[channelIndex];
        const channelEl = $(channel.id);
        const lineEl = $(channel.lineId);

        if (channelEl) channelEl.classList.add('active');
        if (lineEl) lineEl.classList.add('active');

        schedule(() => animatePacket(channel, () => logo.classList.add('processing')), 80);

        schedule(() => {
          logo.classList.remove('processing');
          logo.classList.add('success');
          outputLine.classList.add('active');
        }, CONFIG.channelDuration + CONFIG.processingDuration);

        schedule(() => {
          inbox.classList.add('active');
          messageCount++;
          inboxBadge.textContent = `+${messageCount}`;
        }, CONFIG.channelDuration + CONFIG.processingDuration + CONFIG.outputDuration);

        schedule(() => {
          if (channelEl) channelEl.classList.remove('active');
          if (lineEl) lineEl.classList.remove('active');
          logo.classList.remove('success');
          outputLine.classList.remove('active');
          callback && callback();
        }, CONFIG.channelDuration + CONFIG.processingDuration + CONFIG.outputDuration + CONFIG.pauseBetween);
      };

      let currentChannel = 0;

      const runSequence = () => {
        if (currentChannel < channels.length) {
          animateChannel(currentChannel, () => {
            currentChannel++;
            runSequence();
          });
        } else {
          schedule(() => {
            resetAll();
            currentChannel = 0;
            runSequence();
          }, CONFIG.loopDelay);
        }
      };

      schedule(() => runSequence(), 1000);
    })();

    // Load blog articles
    async function loadBlogArticles() {
      const blogGrid = document.getElementById('blogGrid');
      if (!blogGrid) return;

      try {
        const res = await fetch(`/api/articles?lang=${currentLang}`);
        const articles = await res.json();

        if (articles.length === 0) {
          blogGrid.innerHTML = `<p style="color: var(--landing-text-muted); grid-column: 1/-1; text-align: center;">No articles yet.</p>`;
          return;
        }

        blogGrid.innerHTML = articles.slice(0, 3).map(article => `
          <a href="/article/${article.slug}" class="blog-card">
            <div class="blog-card__image">
              ${article.cover_image ? `<img src="${article.cover_image}" alt="${article.title}" loading="lazy">` : ''}
            </div>
            <div class="blog-card__body">
              <h3 class="blog-card__title">${article.title}</h3>
              <p class="blog-card__excerpt">${article.content?.substring(0, 100).replace(/[#*_`]/g, '')}...</p>
              <div class="blog-card__meta">${new Date(article.created_at).toLocaleDateString()}</div>
            </div>
          </a>
        `).join('');
      } catch (err) {
        blogGrid.innerHTML = '';
      }
    }

    // ============================================
    // ROI CALCULATOR MODAL
    // ============================================
    (function() {
      const modal = document.getElementById('roiModal');
      const openBtn = document.getElementById('openRoiCalculator');
      const closeBtn = document.getElementById('closeRoiModal');
      const backdrop = modal?.querySelector('.roi-modal__backdrop');

      // Pricing config per language (base price, resolution price, symbol)
      const pricingConfig = {
        en: { symbol: '$', baseCost: 99, resolutionCost: 0.90 },
        fr: { symbol: '\u20AC', baseCost: 99, resolutionCost: 0.90 },
        he: { symbol: '\u20AA', baseCost: 299, resolutionCost: 2.99 }
      };

      const getPricing = () => pricingConfig[currentLang] || pricingConfig.en;

      const formatCurrency = (amount) => {
        const { symbol } = getPricing();
        const rounded = Math.round(amount);
        return currentLang === 'he' ? `${rounded.toLocaleString()} ${symbol}` : `${symbol}${rounded.toLocaleString()}`;
      };

      const openModal = () => {
        modal?.classList.add('is-open');
        document.body.style.overflow = 'hidden';
        calculateROI();
      };

      const closeModal = () => {
        modal?.classList.remove('is-open');
        document.body.style.overflow = '';
      };

      openBtn?.addEventListener('click', openModal);
      closeBtn?.addEventListener('click', closeModal);
      backdrop?.addEventListener('click', closeModal);

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal?.classList.contains('is-open')) {
          closeModal();
        }
      });

      // ROI Calculation
      const calculateROI = () => {
        const conversations = parseInt(document.getElementById('roiConversations')?.value) || 1000;
        const handleTime = parseInt(document.getElementById('roiHandleTime')?.value) || 8;
        const agentCost = parseInt(document.getElementById('roiAgentCost')?.value) || 25;
        const resolutionRate = parseInt(document.getElementById('roiResolutionRate')?.value) || 70;

        // Current cost: (conversations * handleTime / 60) * agentCost
        const totalHoursNow = (conversations * handleTime) / 60;
        const currentCost = totalHoursNow * agentCost;

        // With Cardynal:
        // - AI resolves X% of conversations
        // - Base cost + resolution cost per language
        const { baseCost, resolutionCost } = getPricing();
        const aiResolutions = Math.round(conversations * (resolutionRate / 100));
        const humanConversations = conversations - aiResolutions;
        const humanHours = (humanConversations * handleTime) / 60;
        const humanCost = humanHours * agentCost;
        const cardynalResolutionCost = aiResolutions * resolutionCost;
        const withCardynal = humanCost + baseCost + cardynalResolutionCost;

        // Savings
        const monthlySavings = Math.max(0, currentCost - withCardynal);
        const hoursRecovered = totalHoursNow - humanHours;

        // Update UI
        document.getElementById('roiCurrentCost').textContent = formatCurrency(currentCost);
        document.getElementById('roiWithCardynal').textContent = formatCurrency(withCardynal);
        document.getElementById('roiMonthlySavings').textContent = formatCurrency(monthlySavings);
        document.getElementById('roiHoursRecovered').textContent = `${Math.round(hoursRecovered)}h`;

        // Update currency symbol in label
        document.querySelectorAll('.roi-currency').forEach(el => {
          el.textContent = getPricing().symbol;
        });
      };

      // Add input listeners
      ['roiConversations', 'roiHandleTime', 'roiAgentCost', 'roiResolutionRate'].forEach(id => {
        document.getElementById(id)?.addEventListener('input', calculateROI);
      });

      // Update slider value display
      const slider = document.getElementById('roiResolutionRate');
      const sliderValue = document.getElementById('roiResolutionValue');
      if (slider && sliderValue) {
        slider.addEventListener('input', () => {
          sliderValue.textContent = `${slider.value}%`;
        });
      }

      // Recalculate when language changes
      const originalTranslate = window.translatePage || translatePage;
      window.translatePage = function() {
        originalTranslate();
        if (modal?.classList.contains('is-open')) {
          calculateROI();
        }
      };
    })();

    // Initialize
    translatePage();
    loadBlogArticles();
  </script>

  <!-- Chatwoot Widget -->
  <script>
  (function (d, t) {
    var BASE_URL = "https://chat.cardynal.io";
    var WEBSITE_TOKEN = "7PwgMVsR7wfFz6E5A5CUqPTW";
    var AVATAR_URL = "https://framerusercontent.com/images/GPZG3phbgDD3soiTuaEEK2Tq8A.png";

    var SHOW_AFTER_SCROLL_Y = 120;
    var avatar;

    // Get current theme and language from page settings
    function getPageTheme() {
      return localStorage.getItem('cardynal_theme') === 'light' ? 'light' : 'dark';
    }

    function getPageLang() {
      var path = window.location.pathname;
      if (path.startsWith('/fr')) return 'fr';
      if (path.startsWith('/he')) return 'he';
      return localStorage.getItem('cardynal_lang') || 'en';
    }

    window.chatwootSettings = {
      hideMessageBubble: true,
      position: "right",
      locale: getPageLang(),
      type: "standard",
      darkMode: getPageTheme()
    };

    var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
    g.src = BASE_URL + "/packs/js/sdk.js"; g.async = true; s.parentNode.insertBefore(g, s);

    function getHolder() {
      return d.querySelector(".woot-widget-holder")
        || (d.querySelector('iframe#chatwoot_live_chat_widget') && d.querySelector('iframe#chatwoot_live_chat_widget').parentElement)
        || d.querySelector('iframe[id*="chatwoot"]')?.parentElement
        || null;
    }

    function updateWidgetTheme() {
      var theme = getPageTheme();
      var ifr = d.querySelector('iframe#chatwoot_live_chat_widget, iframe[id*="chatwoot"]');
      if (ifr) {
        ifr.style.colorScheme = theme;
      }
      // Update chatwoot settings for next load
      if (window.chatwootSettings) {
        window.chatwootSettings.darkMode = theme;
      }
    }

    function ensureWidgetAbove() {
      var holder = getHolder();
      if (!holder) return false;

      if (holder !== d.body.lastElementChild) d.body.appendChild(holder);
      holder.style.position = "fixed";
      holder.style.zIndex = "2147483647";

      var ifr = holder.querySelector("iframe") || d.querySelector('iframe#chatwoot_live_chat_widget, iframe[id*="chatwoot"]');
      if (ifr) {
        ifr.style.position = "fixed";
        ifr.style.zIndex = "2147483647";
        ifr.style.colorScheme = getPageTheme();
      }

      return true;
    }

    function injectCSS() {
      if (d.getElementById("cardynal-launcher-style")) return;
      var css = `
        #cardynal-launcher{
          position:fixed; right:24px; bottom:24px; width:90px; height:auto; cursor:pointer; z-index:100;
          opacity:0; pointer-events:none; transform:translateY(12px);
          transition: opacity .35s ease, transform .35s ease;
          will-change: opacity, transform;
        }
        #cardynal-launcher.is-visible{ opacity:1; pointer-events:auto; transform:none; }
        #cardynal-launcher.is-soft{ opacity:.01 !important; pointer-events:none !important; }
      `;
      var style = d.createElement("style");
      style.id = "cardynal-launcher-style";
      style.textContent = css;
      d.head.appendChild(style);
    }

    function createAvatar() {
      if (d.getElementById("cardynal-launcher")) return;
      injectCSS();
      avatar = d.createElement("img");
      avatar.id = "cardynal-launcher";
      avatar.src = AVATAR_URL;
      avatar.alt = "Cardynal Bot";
      avatar.addEventListener("click", function () {
        if (window.$chatwoot && window.$chatwoot.toggle) window.$chatwoot.toggle("open");
        ensureWidgetAbove();
      });
      d.body.appendChild(avatar);
    }

    function softenAvatar() { if (avatar) avatar.classList.add("is-soft"); }
    function restoreAvatar() { if (avatar) avatar.classList.remove("is-soft"); }

    function installScrollReveal() {
      var ticking = false;
      function onScroll() {
        if (ticking) return;
        ticking = true;
        requestAnimationFrame(function () {
          var y = window.pageYOffset || d.documentElement.scrollTop || 0;
          if (avatar) {
            if (y > SHOW_AFTER_SCROLL_Y) avatar.classList.add("is-visible");
            else avatar.classList.remove("is-visible");
          }
          ticking = false;
        });
      }
      window.addEventListener("scroll", onScroll, { passive: true });
      onScroll();
    }

    var mo = new MutationObserver(function () { ensureWidgetAbove(); });
    mo.observe(document.documentElement, { childList: true, subtree: true });

    // Watch for theme changes on body class
    var themeObserver = new MutationObserver(function (mutations) {
      mutations.forEach(function (mutation) {
        if (mutation.attributeName === 'class') {
          updateWidgetTheme();
        }
      });
    });
    themeObserver.observe(d.body, { attributes: true, attributeFilter: ['class'] });

    g.onload = function () {
      window.chatwootSDK.run({ websiteToken: WEBSITE_TOKEN, baseUrl: BASE_URL });
      function onReady() {
        createAvatar();
        ensureWidgetAbove();
        installScrollReveal();
        updateWidgetTheme();
        window.addEventListener("chatwoot:opened", function(){ ensureWidgetAbove(); softenAvatar(); });
        window.addEventListener("chatwoot:closed", function(){ restoreAvatar(); });
        if (window.$chatwoot && window.$chatwoot.on) {
          try {
            window.$chatwoot.on("widget:opened", function(){ ensureWidgetAbove(); softenAvatar(); });
            window.$chatwoot.on("widget:closed", function(){ restoreAvatar(); });
          } catch(e){}
        }
      }
      if (window.chatwootSDK && window.chatwootSDK.on) window.chatwootSDK.on("ready", onReady);
      window.addEventListener("chatwoot:ready", onReady);
      setTimeout(onReady, 1200);
    };
  })(document, "script");
  </script>
</body>
</html>
